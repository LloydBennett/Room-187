"use strict";
self["webpackHotUpdateroom187"]("main",{

/***/ "./app/pages/About/index.js":
/*!**********************************!*\
  !*** ./app/pages/About/index.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ About)
/* harmony export */ });
/* harmony import */ var classes_Page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classes/Page */ "./app/classes/Page.js");
/* harmony import */ var lenis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lenis */ "./node_modules/lenis/dist/lenis.mjs");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var gsap_CustomEase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap/CustomEase */ "./node_modules/gsap/CustomEase.js");
/* harmony import */ var gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gsap/SplitText */ "./node_modules/gsap/SplitText.js");
/* harmony import */ var components_TextSplit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/TextSplit */ "./app/components/TextSplit.js");
/* harmony import */ var utils_LenisScroll__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/LenisScroll */ "./app/utils/LenisScroll.js");







class About extends classes_Page__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super({
      id: 'about',
      elements: {
        bioTrigger: '[data-bio-trigger]',
        close: '[data-bio-overlay-modal] [data-close]',
        bioOverlay: '[data-bio-overlay-modal]',
        bioContainer: '[data-bio-overlay-content]',
        body: 'body',
        imageCarousel: '[data-image-carousel]'
      }
    });
    gsap__WEBPACK_IMPORTED_MODULE_3__["default"].registerPlugin(gsap_CustomEase__WEBPACK_IMPORTED_MODULE_4__.CustomEase, gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText);
    gsap_CustomEase__WEBPACK_IMPORTED_MODULE_4__.CustomEase.create("zoom", "0.71, 0, 0.06, 1");
    this.pageScroll = utils_LenisScroll__WEBPACK_IMPORTED_MODULE_2__.scroll;
    this.isOpen = false;
    this.tl = new gsap__WEBPACK_IMPORTED_MODULE_3__["default"].timeline();
    this.mm = gsap__WEBPACK_IMPORTED_MODULE_3__["default"].matchMedia();
    this.addEventListeners();
    this.enableDraggableCarousel();
  }
  onPopState() {
    this.onChange({
      url: window.location.pathname,
      push: false
    });
  }
  async onChange({
    url,
    push = true
  }) {
    if (push) {
      this.previousUrl = window.location.pathname;
      window.history.pushState({}, "", url);
    }
    const req = await window.fetch(url);
    if (req.status === 200) {
      const html = await req.text();
      const div = document.createElement('div');
      div.innerHTML = html;
      if (push) {
        window.history.pushState({}, "", url);
      }
      const divContent = div.querySelector('[data-inner-content]');
      this.elements.bioContainer.innerHTML = divContent.innerHTML;
      this.elements.bioImage = this.elements.bioContainer.querySelector('[data-bio-image]');
      this.elements.mainTitles = this.elements.bioContainer.querySelectorAll('[data-bio-overlay-modal] [data-hero] [data-text-reveal]');
      this.elements.bioText = this.elements.bioContainer.querySelector('.bio__content [data-split-text]');
      this.elements.bioRole = this.elements.bioContainer.querySelector('[data-bio-overlay-modal] .bio__role [data-split-text]');
      if (!this.modalScroll) {
        this.init();
      } else {
        this.modalScroll.resize();
      }
      this.setAnimationPositions();
      this.animateContent();
    }
  }
  removeContent() {
    this.elements.bioContainer.innerHTML = "";
  }
  openModal() {
    if (this.isOpen) return;
    this.pageScroll.stop();
    this.elements.body.classList.add('no-scrolling');
    this.tl.to(this.elements.bioOverlay, {
      clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
      duration: 0.6,
      ease: "zoom"
    });
  }
  closeModal() {
    this.tl.to(this.elements.bioOverlay, {
      clipPath: "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",
      duration: 0.6,
      ease: "zoom",
      onComplete: () => {
        this.isOpen = false;
        this.setAnimationPositions();
        this.removeContent();
        this.pageScroll.start();
      }
    });
  }
  animateContent() {
    const tl = gsap__WEBPACK_IMPORTED_MODULE_3__["default"].timeline();
    this.tl.to(this.elements.mainTitles, {
      y: 0,
      duration: 0.8,
      ease: "zoom",
      stagger: (i, target) => target.dataset.textReveal ? 0.05 * Number(target.dataset.textReveal) : 0.05
    }, '-=0.3');
    this.tl.to(this.elements.bioRole, {
      y: 0,
      duration: 0.8,
      ease: "zoom"
    }, '-=0.6');
    document.fonts.ready.then(() => {
      const split = gsap_SplitText__WEBPACK_IMPORTED_MODULE_5__.SplitText.create(this.elements.bioText, {
        type: "lines",
        lineClass: "line",
        mask: "lines",
        autoSplit: true,
        onSplit: self => {
          return this.animateBodyText(this.elements.bioText, self.lines);
        }
      });
    });
    this.tl.to(this.elements.bioImage, {
      y: 0,
      opacity: 1,
      duration: 0.4,
      ease: "power2.out"
    }, '-=0.6');
    this.tl.to(this.elements.close, {
      opacity: 1,
      duration: 0.3,
      ease: "power2.out",
      onComplete: () => {
        this.isOpen = true;
        this.elements.body.classList.remove('no--scrolling');
        this.modalScroll.start();
      }
    }, '-=0.2');
  }
  animateBodyText(text, lines) {
    this.mm.add("(max-width: 1199px)", () => {
      components_TextSplit__WEBPACK_IMPORTED_MODULE_1__["default"].scrollAnimateText(text, lines);
      console.log('its working');
    });
    this.mm.add("(min-width: 1200px)", () => {
      this.tl.fromTo(lines, {
        y: "100%"
      }, {
        y: 0,
        duration: 0.8,
        ease: "zoom",
        stagger: 0.05
      }, '-=0.8');
    });
  }
  enableDraggableCarousel() {
    const carousel = this.elements.imageCarousel;
    const items = carousel.querySelectorAll(".image-carousel__item");
    if (!carousel || items.length === 0) return;
    let isDragging = false;
    let startX = 0;
    let lastX = 0;
    let velocity = 0;
    let rafId = null;
    const friction = 0.925;
    const speedMultiplier = 1.35;
    const rotationIntensity = 0.04; // ⬅️ Subtle swing

    const resetRotation = () => {
      items.forEach(item => {
        gsap__WEBPACK_IMPORTED_MODULE_3__["default"].to(item, {
          rotationZ: 0,
          // Reset swing
          duration: 0.6,
          ease: "power3.out",
          overwrite: true
        });
      });
    };
    const updateItemRotations = v => {
      items.forEach((item, index) => {
        const factor = (index + 1) / items.length;
        const rotateZ = gsap__WEBPACK_IMPORTED_MODULE_3__["default"].utils.clamp(-2, 2, v * rotationIntensity * factor);
        gsap__WEBPACK_IMPORTED_MODULE_3__["default"].to(item, {
          rotationZ: rotateZ,
          duration: isDragging ? 0.1 : 0.4,
          ease: "power2.out",
          overwrite: true
        });
      });
    };
    const inertiaLoop = () => {
      if (Math.abs(velocity) < 0.2) {
        resetRotation();
        return;
      }
      carousel.scrollLeft -= velocity;
      updateItemRotations(velocity);
      velocity *= friction;
      rafId = requestAnimationFrame(inertiaLoop);
    };
    const startDrag = e => {
      isDragging = true;
      carousel.classList.add("is-dragging");
      startX = e.type.includes("mouse") ? e.pageX : e.touches[0].pageX;
      lastX = startX;
      cancelAnimationFrame(rafId);
    };
    const onDrag = e => {
      if (!isDragging) return;
      const x = e.type.includes("mouse") ? e.pageX : e.touches[0].pageX;
      const delta = (x - lastX) * speedMultiplier;
      carousel.scrollLeft -= delta;
      velocity = delta;
      lastX = x;
      updateItemRotations(velocity);
    };
    const endDrag = () => {
      isDragging = false;
      carousel.classList.remove("is-dragging");
      inertiaLoop();
    };

    // Mouse Events
    carousel.addEventListener("mousedown", startDrag);
    window.addEventListener("mousemove", onDrag);
    window.addEventListener("mouseup", endDrag);

    // Touch Events
    carousel.addEventListener("touchstart", startDrag, {
      passive: true
    });
    window.addEventListener("touchmove", onDrag, {
      passive: false
    });
    window.addEventListener("touchend", endDrag);
  }
  addEventListeners() {
    if (!this.elements.bioTrigger || !this.elements.close) return;
    this.elements.bioTrigger.forEach(l => {
      l.onclick = event => {
        event.preventDefault();
        const href = l.href;
        this.openModal();
        this.onChange({
          url: href
        });
      };
    });
    this.elements.close.addEventListener('click', () => {
      if (this.previousUrl) {
        window.history.replaceState({}, "", this.previousUrl);
      }
      this.closeModal();
    });
    window.addEventListener('popstate', this.onPopState.bind(this));
  }
  setAnimationPositions() {
    gsap__WEBPACK_IMPORTED_MODULE_3__["default"].set(this.elements.close, {
      opacity: 0
    });
    gsap__WEBPACK_IMPORTED_MODULE_3__["default"].set(this.elements.mainTitles, {
      y: "100%"
    });
    gsap__WEBPACK_IMPORTED_MODULE_3__["default"].set(this.elements.bioRole, {
      y: "100%"
    });
    gsap__WEBPACK_IMPORTED_MODULE_3__["default"].set(this.elements.bioImage, {
      y: "20%",
      opacity: 0
    });
  }
  init() {
    if (!this.elements.bioOverlay || !this.elements.bioContainer) {
      console.error("❌ Lenis Initialization Failed: Missing Elements", this.elements);
      return;
    }
    this.modalScroll = new lenis__WEBPACK_IMPORTED_MODULE_6__["default"]({
      wrapper: this.elements.bioOverlay,
      content: this.elements.bioContainer,
      autoRaf: true,
      duration: 1
    });
    const raf = time => {
      this.modalScroll.raf(time);
      requestAnimationFrame(raf);
    };
    requestAnimationFrame(raf);
    this.modalScroll.stop();
    this.enableDraggableCarousel();
  }
}

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("25eab23141af34da0871")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxFQUFFO0lBQ1osQ0FBQyxDQUFDO0lBRUYsTUFBTWtGLEdBQUcsR0FBSUMsSUFBSSxJQUFLO01BQ3BCLElBQUksQ0FBQy9GLFdBQVcsQ0FBQzhGLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO01BQzFCMUIscUJBQXFCLENBQUN5QixHQUFHLENBQUM7SUFDNUIsQ0FBQztJQUVEekIscUJBQXFCLENBQUN5QixHQUFHLENBQUM7SUFFMUIsSUFBSSxDQUFDOUYsV0FBVyxDQUFDTyxJQUFJLENBQUMsQ0FBQztJQUV2QixJQUFJLENBQUNsQyx1QkFBdUIsQ0FBQyxDQUFDO0VBRWhDO0FBRUYsQzs7Ozs7Ozs7VUMvU0Esc0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb29tMTg3Ly4vYXBwL3BhZ2VzL0Fib3V0L2luZGV4LmpzIiwid2VicGFjazovL3Jvb20xODcvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWdlIGZyb20gJ2NsYXNzZXMvUGFnZSdcbmltcG9ydCBMZW5pcyBmcm9tICdsZW5pcydcbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnXG5pbXBvcnQgeyBDdXN0b21FYXNlIH0gZnJvbSAnZ3NhcC9DdXN0b21FYXNlJ1xuaW1wb3J0IHsgU3BsaXRUZXh0IH0gZnJvbSAnZ3NhcC9TcGxpdFRleHQnXG5pbXBvcnQgVGV4dFNwbGl0IGZyb20gJ2NvbXBvbmVudHMvVGV4dFNwbGl0J1xuaW1wb3J0IHsgc2Nyb2xsIH0gZnJvbSAndXRpbHMvTGVuaXNTY3JvbGwnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFib3V0IGV4dGVuZHMgUGFnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIGlkOiAnYWJvdXQnLFxuICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgYmlvVHJpZ2dlcjogJ1tkYXRhLWJpby10cmlnZ2VyXScsXG4gICAgICAgIGNsb3NlOiAnW2RhdGEtYmlvLW92ZXJsYXktbW9kYWxdIFtkYXRhLWNsb3NlXScsXG4gICAgICAgIGJpb092ZXJsYXk6ICdbZGF0YS1iaW8tb3ZlcmxheS1tb2RhbF0nLFxuICAgICAgICBiaW9Db250YWluZXI6ICdbZGF0YS1iaW8tb3ZlcmxheS1jb250ZW50XScsXG4gICAgICAgIGJvZHk6ICdib2R5JyxcbiAgICAgICAgaW1hZ2VDYXJvdXNlbDogJ1tkYXRhLWltYWdlLWNhcm91c2VsXSdcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGdzYXAucmVnaXN0ZXJQbHVnaW4oQ3VzdG9tRWFzZSwgU3BsaXRUZXh0KVxuICAgIEN1c3RvbUVhc2UuY3JlYXRlKFwiem9vbVwiLCBcIjAuNzEsIDAsIDAuMDYsIDFcIilcbiAgICB0aGlzLnBhZ2VTY3JvbGwgPSBzY3JvbGxcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlXG4gICAgdGhpcy50bCA9IG5ldyBnc2FwLnRpbWVsaW5lKClcbiAgICB0aGlzLm1tID0gZ3NhcC5tYXRjaE1lZGlhKClcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKClcbiAgICB0aGlzLmVuYWJsZURyYWdnYWJsZUNhcm91c2VsKClcbiAgfVxuXG4gIG9uUG9wU3RhdGUgKCkge1xuICAgIHRoaXMub25DaGFuZ2Uoe1xuICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBwdXNoOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBvbkNoYW5nZSh7IHVybCwgcHVzaCA9IHRydWUgfSkge1xuICAgIGlmIChwdXNoKSB7XG4gICAgICB0aGlzLnByZXZpb3VzVXJsID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sIFwiXCIsIHVybClcbiAgICB9XG4gICAgY29uc3QgcmVxID0gYXdhaXQgd2luZG93LmZldGNoKHVybClcblxuICAgIGlmKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcS50ZXh0KClcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBkaXYuaW5uZXJIVE1MID0gaHRtbFxuXG4gICAgICBpZihwdXNoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgXCJcIiwgdXJsKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkaXZDb250ZW50ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlubmVyLWNvbnRlbnRdJylcbiAgICAgIFxuICAgICAgdGhpcy5lbGVtZW50cy5iaW9Db250YWluZXIuaW5uZXJIVE1MID0gZGl2Q29udGVudC5pbm5lckhUTUxcbiAgICAgIHRoaXMuZWxlbWVudHMuYmlvSW1hZ2UgPSB0aGlzLmVsZW1lbnRzLmJpb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1iaW8taW1hZ2VdJylcbiAgICAgIHRoaXMuZWxlbWVudHMubWFpblRpdGxlcyA9IHRoaXMuZWxlbWVudHMuYmlvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJpby1vdmVybGF5LW1vZGFsXSBbZGF0YS1oZXJvXSBbZGF0YS10ZXh0LXJldmVhbF0nKVxuICAgICAgdGhpcy5lbGVtZW50cy5iaW9UZXh0ID0gdGhpcy5lbGVtZW50cy5iaW9Db250YWluZXIucXVlcnlTZWxlY3RvcignLmJpb19fY29udGVudCBbZGF0YS1zcGxpdC10ZXh0XScpXG4gICAgICB0aGlzLmVsZW1lbnRzLmJpb1JvbGUgPSB0aGlzLmVsZW1lbnRzLmJpb0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1iaW8tb3ZlcmxheS1tb2RhbF0gLmJpb19fcm9sZSBbZGF0YS1zcGxpdC10ZXh0XScpXG4gICAgICBcbiAgICAgIGlmICghdGhpcy5tb2RhbFNjcm9sbCkge1xuICAgICAgICB0aGlzLmluaXQoKTsgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vZGFsU2Nyb2xsLnJlc2l6ZSgpXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0QW5pbWF0aW9uUG9zaXRpb25zKClcbiAgICAgIHRoaXMuYW5pbWF0ZUNvbnRlbnQoKVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUNvbnRlbnQoKSB7XG4gICAgdGhpcy5lbGVtZW50cy5iaW9Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIlxuICB9XG5cbiAgb3Blbk1vZGFsKCkge1xuICAgIGlmICh0aGlzLmlzT3BlbikgcmV0dXJuXG5cbiAgICB0aGlzLnBhZ2VTY3JvbGwuc3RvcCgpXG4gICAgdGhpcy5lbGVtZW50cy5ib2R5LmNsYXNzTGlzdC5hZGQoJ25vLXNjcm9sbGluZycpXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuYmlvT3ZlcmxheSwge1xuICAgICAgY2xpcFBhdGg6IFwicG9seWdvbigwJSAwJSwgMTAwJSAwJSwgMTAwJSAxMDAlLCAwJSAxMDAlKVwiLFxuICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgIGVhc2U6IFwiem9vbVwiXG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy50bC50byh0aGlzLmVsZW1lbnRzLmJpb092ZXJsYXksIHtcbiAgICAgIGNsaXBQYXRoOiBcInBvbHlnb24oMCUgMTAwJSwgMTAwJSAxMDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIsICBcbiAgICAgIGR1cmF0aW9uOiAwLjYsXG4gICAgICBlYXNlOiBcInpvb21cIixcbiAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZVxuICAgICAgICB0aGlzLnNldEFuaW1hdGlvblBvc2l0aW9ucygpXG4gICAgICAgIHRoaXMucmVtb3ZlQ29udGVudCgpXG4gICAgICAgIHRoaXMucGFnZVNjcm9sbC5zdGFydCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFuaW1hdGVDb250ZW50KCkge1xuICAgIGNvbnN0IHRsID0gZ3NhcC50aW1lbGluZSgpXG4gICAgXG4gICAgdGhpcy50bC50byh0aGlzLmVsZW1lbnRzLm1haW5UaXRsZXMsIHsgeTogMCwgZHVyYXRpb246IDAuOCwgZWFzZTogXCJ6b29tXCIsIHN0YWdnZXI6IChpLCB0YXJnZXQpID0+IHRhcmdldC5kYXRhc2V0LnRleHRSZXZlYWwgPyAwLjA1ICogTnVtYmVyKHRhcmdldC5kYXRhc2V0LnRleHRSZXZlYWwpOiAwLjA1IH0sICctPTAuMycpXG4gICAgdGhpcy50bC50byh0aGlzLmVsZW1lbnRzLmJpb1JvbGUsIHsgeTogMCwgZHVyYXRpb246IDAuOCwgZWFzZTogXCJ6b29tXCJ9LCAnLT0wLjYnKVxuXG4gICAgZG9jdW1lbnQuZm9udHMucmVhZHkudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBzcGxpdCA9IFNwbGl0VGV4dC5jcmVhdGUodGhpcy5lbGVtZW50cy5iaW9UZXh0LCB7XG4gICAgICAgIHR5cGU6IFwibGluZXNcIixcbiAgICAgICAgbGluZUNsYXNzOiBcImxpbmVcIixcbiAgICAgICAgbWFzazogXCJsaW5lc1wiLFxuICAgICAgICBhdXRvU3BsaXQ6IHRydWUsXG4gICAgICAgIG9uU3BsaXQ6IChzZWxmKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZUJvZHlUZXh0KHRoaXMuZWxlbWVudHMuYmlvVGV4dCwgc2VsZi5saW5lcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy50bC50byh0aGlzLmVsZW1lbnRzLmJpb0ltYWdlLCB7IHk6IDAsIG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAwLjQsIGVhc2U6IFwicG93ZXIyLm91dFwiIH0sICctPTAuNicpXG4gICAgICBcbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuY2xvc2UsIHsgb3BhY2l0eTogMSwgZHVyYXRpb246IDAuMywgZWFzZTogXCJwb3dlcjIub3V0XCIsIG9uQ29tcGxldGU6ICgpPT4ge1xuICAgICAgdGhpcy5pc09wZW4gPSB0cnVlXG4gICAgICB0aGlzLmVsZW1lbnRzLmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbm8tLXNjcm9sbGluZycpXG4gICAgICB0aGlzLm1vZGFsU2Nyb2xsLnN0YXJ0KClcbiAgICB9fSwgJy09MC4yJylcbiAgfVxuXG4gIGFuaW1hdGVCb2R5VGV4dCh0ZXh0LCBsaW5lcykge1xuICAgIHRoaXMubW0uYWRkKFwiKG1heC13aWR0aDogMTE5OXB4KVwiLCAoKSA9PiB7XG4gICAgICBUZXh0U3BsaXQuc2Nyb2xsQW5pbWF0ZVRleHQodGV4dCwgbGluZXMpXG4gICAgICBjb25zb2xlLmxvZygnaXRzIHdvcmtpbmcnKVxuICAgIH0pXG5cbiAgICB0aGlzLm1tLmFkZChcIihtaW4td2lkdGg6IDEyMDBweClcIiwgKCkgPT4ge1xuICAgICAgdGhpcy50bC5mcm9tVG8obGluZXMsXG4gICAgICAgIHsgeTogXCIxMDAlXCIgfSxcbiAgICAgICAge1xuICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IDAuOCxcbiAgICAgICAgICBlYXNlOiBcInpvb21cIixcbiAgICAgICAgICBzdGFnZ2VyOiAwLjA1XG4gICAgICAgIH0sXG4gICAgICAnLT0wLjgnKVxuICAgIH0pXG4gIH1cblxuXG4gIGVuYWJsZURyYWdnYWJsZUNhcm91c2VsKCkge1xuICAgIGNvbnN0IGNhcm91c2VsID0gdGhpcy5lbGVtZW50cy5pbWFnZUNhcm91c2VsXG4gICAgY29uc3QgaXRlbXMgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmltYWdlLWNhcm91c2VsX19pdGVtXCIpXG5cbiAgICBpZiAoIWNhcm91c2VsIHx8IGl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICBsZXQgaXNEcmFnZ2luZyA9IGZhbHNlXG4gICAgbGV0IHN0YXJ0WCA9IDBcbiAgICBsZXQgbGFzdFggPSAwXG4gICAgbGV0IHZlbG9jaXR5ID0gMFxuICAgIGxldCByYWZJZCA9IG51bGxcblxuICAgIGNvbnN0IGZyaWN0aW9uID0gMC45MjVcbiAgICBjb25zdCBzcGVlZE11bHRpcGxpZXIgPSAxLjM1XG4gICAgY29uc3Qgcm90YXRpb25JbnRlbnNpdHkgPSAwLjA0IC8vIOKshe+4jyBTdWJ0bGUgc3dpbmdcblxuICAgIGNvbnN0IHJlc2V0Um90YXRpb24gPSAoKSA9PiB7XG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGdzYXAudG8oaXRlbSwge1xuICAgICAgICAgIHJvdGF0aW9uWjogMCwgLy8gUmVzZXQgc3dpbmdcbiAgICAgICAgICBkdXJhdGlvbjogMC42LFxuICAgICAgICAgIGVhc2U6IFwicG93ZXIzLm91dFwiLFxuICAgICAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVJdGVtUm90YXRpb25zID0gKHYpID0+IHtcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGZhY3RvciA9IChpbmRleCArIDEpIC8gaXRlbXMubGVuZ3RoXG4gICAgICAgIGNvbnN0IHJvdGF0ZVogPSBnc2FwLnV0aWxzLmNsYW1wKC0yLCAyLCB2ICogcm90YXRpb25JbnRlbnNpdHkgKiBmYWN0b3IpXG5cbiAgICAgICAgZ3NhcC50byhpdGVtLCB7XG4gICAgICAgICAgcm90YXRpb25aOiByb3RhdGVaLFxuICAgICAgICAgIGR1cmF0aW9uOiBpc0RyYWdnaW5nID8gMC4xIDogMC40LFxuICAgICAgICAgIGVhc2U6IFwicG93ZXIyLm91dFwiLFxuICAgICAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBpbmVydGlhTG9vcCA9ICgpID0+IHtcbiAgICAgIGlmIChNYXRoLmFicyh2ZWxvY2l0eSkgPCAwLjIpIHtcbiAgICAgICAgcmVzZXRSb3RhdGlvbigpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjYXJvdXNlbC5zY3JvbGxMZWZ0IC09IHZlbG9jaXR5XG4gICAgICB1cGRhdGVJdGVtUm90YXRpb25zKHZlbG9jaXR5KVxuXG4gICAgICB2ZWxvY2l0eSAqPSBmcmljdGlvblxuICAgICAgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaW5lcnRpYUxvb3ApXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnREcmFnID0gKGUpID0+IHtcbiAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlXG4gICAgICBjYXJvdXNlbC5jbGFzc0xpc3QuYWRkKFwiaXMtZHJhZ2dpbmdcIilcblxuICAgICAgc3RhcnRYID0gZS50eXBlLmluY2x1ZGVzKFwibW91c2VcIikgPyBlLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VYXG4gICAgICBsYXN0WCA9IHN0YXJ0WFxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmSWQpXG4gICAgfVxuXG4gICAgY29uc3Qgb25EcmFnID0gKGUpID0+IHtcbiAgICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuXG5cbiAgICAgIGNvbnN0IHggPSBlLnR5cGUuaW5jbHVkZXMoXCJtb3VzZVwiKSA/IGUucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVhcbiAgICAgIGNvbnN0IGRlbHRhID0gKHggLSBsYXN0WCkgKiBzcGVlZE11bHRpcGxpZXJcblxuICAgICAgY2Fyb3VzZWwuc2Nyb2xsTGVmdCAtPSBkZWx0YVxuICAgICAgdmVsb2NpdHkgPSBkZWx0YVxuICAgICAgbGFzdFggPSB4XG5cbiAgICAgIHVwZGF0ZUl0ZW1Sb3RhdGlvbnModmVsb2NpdHkpXG4gICAgfVxuXG4gICAgY29uc3QgZW5kRHJhZyA9ICgpID0+IHtcbiAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZVxuICAgICAgY2Fyb3VzZWwuY2xhc3NMaXN0LnJlbW92ZShcImlzLWRyYWdnaW5nXCIpXG4gICAgICBpbmVydGlhTG9vcCgpXG4gICAgfVxuXG4gICAgLy8gTW91c2UgRXZlbnRzXG4gICAgY2Fyb3VzZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBzdGFydERyYWcpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25EcmFnKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBlbmREcmFnKVxuXG4gICAgLy8gVG91Y2ggRXZlbnRzXG4gICAgY2Fyb3VzZWwuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgc3RhcnREcmFnLCB7IHBhc3NpdmU6IHRydWUgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvbkRyYWcsIHsgcGFzc2l2ZTogZmFsc2UgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGVuZERyYWcpXG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudHMuYmlvVHJpZ2dlciB8fCAhdGhpcy5lbGVtZW50cy5jbG9zZSkgcmV0dXJuXG4gICAgXG4gICAgdGhpcy5lbGVtZW50cy5iaW9UcmlnZ2VyLmZvckVhY2goKGwpID0+IHtcbiAgICAgIFxuICAgICAgbC5vbmNsaWNrID0gZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGNvbnN0IGhyZWYgPSBsLmhyZWZcblxuICAgICAgICB0aGlzLm9wZW5Nb2RhbCgpXG4gICAgICAgIHRoaXMub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5lbGVtZW50cy5jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnByZXZpb3VzVXJsKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdGhpcy5wcmV2aW91c1VybClcbiAgICAgIH1cblxuICAgICAgdGhpcy5jbG9zZU1vZGFsKClcbiAgICB9KVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5vblBvcFN0YXRlLmJpbmQodGhpcykpXG4gIH1cblxuICBzZXRBbmltYXRpb25Qb3NpdGlvbnMoKSB7XG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5jbG9zZSwgeyBvcGFjaXR5OiAwIH0pXG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5tYWluVGl0bGVzLCB7IHk6IFwiMTAwJVwiIH0pXG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5iaW9Sb2xlLCB7IHk6IFwiMTAwJVwiIH0pXG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5iaW9JbWFnZSwgeyB5OiBcIjIwJVwiLCBvcGFjaXR5OiAwIH0pXG4gIH1cblxuICBpbml0KCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50cy5iaW9PdmVybGF5IHx8ICF0aGlzLmVsZW1lbnRzLmJpb0NvbnRhaW5lcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBMZW5pcyBJbml0aWFsaXphdGlvbiBGYWlsZWQ6IE1pc3NpbmcgRWxlbWVudHNcIiwgdGhpcy5lbGVtZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tb2RhbFNjcm9sbCA9IG5ldyBMZW5pcyh7XG4gICAgICB3cmFwcGVyOiB0aGlzLmVsZW1lbnRzLmJpb092ZXJsYXksXG4gICAgICBjb250ZW50OiB0aGlzLmVsZW1lbnRzLmJpb0NvbnRhaW5lcixcbiAgICAgIGF1dG9SYWY6IHRydWUsXG4gICAgICBkdXJhdGlvbjogMVxuICAgIH0pXG5cbiAgICBjb25zdCByYWYgPSAodGltZSkgPT4ge1xuICAgICAgdGhpcy5tb2RhbFNjcm9sbC5yYWYodGltZSlcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyYWYpXG4gICAgfVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJhZilcblxuICAgIHRoaXMubW9kYWxTY3JvbGwuc3RvcCgpXG4gICAgXG4gICAgdGhpcy5lbmFibGVEcmFnZ2FibGVDYXJvdXNlbCgpXG5cbiAgfVxuICBcbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIyNWVhYjIzMTQxYWYzNGRhMDg3MVwiKSJdLCJuYW1lcyI6WyJQYWdlIiwiTGVuaXMiLCJnc2FwIiwiQ3VzdG9tRWFzZSIsIlNwbGl0VGV4dCIsIlRleHRTcGxpdCIsInNjcm9sbCIsIkFib3V0IiwiY29uc3RydWN0b3IiLCJpZCIsImVsZW1lbnRzIiwiYmlvVHJpZ2dlciIsImNsb3NlIiwiYmlvT3ZlcmxheSIsImJpb0NvbnRhaW5lciIsImJvZHkiLCJpbWFnZUNhcm91c2VsIiwicmVnaXN0ZXJQbHVnaW4iLCJjcmVhdGUiLCJwYWdlU2Nyb2xsIiwiaXNPcGVuIiwidGwiLCJ0aW1lbGluZSIsIm1tIiwibWF0Y2hNZWRpYSIsImFkZEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlRHJhZ2dhYmxlQ2Fyb3VzZWwiLCJvblBvcFN0YXRlIiwib25DaGFuZ2UiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicHVzaCIsInByZXZpb3VzVXJsIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcSIsImZldGNoIiwic3RhdHVzIiwiaHRtbCIsInRleHQiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJkaXZDb250ZW50IiwicXVlcnlTZWxlY3RvciIsImJpb0ltYWdlIiwibWFpblRpdGxlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiaW9UZXh0IiwiYmlvUm9sZSIsIm1vZGFsU2Nyb2xsIiwiaW5pdCIsInJlc2l6ZSIsInNldEFuaW1hdGlvblBvc2l0aW9ucyIsImFuaW1hdGVDb250ZW50IiwicmVtb3ZlQ29udGVudCIsIm9wZW5Nb2RhbCIsInN0b3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0byIsImNsaXBQYXRoIiwiZHVyYXRpb24iLCJlYXNlIiwiY2xvc2VNb2RhbCIsIm9uQ29tcGxldGUiLCJzdGFydCIsInkiLCJzdGFnZ2VyIiwiaSIsInRhcmdldCIsImRhdGFzZXQiLCJ0ZXh0UmV2ZWFsIiwiTnVtYmVyIiwiZm9udHMiLCJyZWFkeSIsInRoZW4iLCJzcGxpdCIsInR5cGUiLCJsaW5lQ2xhc3MiLCJtYXNrIiwiYXV0b1NwbGl0Iiwib25TcGxpdCIsInNlbGYiLCJhbmltYXRlQm9keVRleHQiLCJsaW5lcyIsIm9wYWNpdHkiLCJyZW1vdmUiLCJzY3JvbGxBbmltYXRlVGV4dCIsImNvbnNvbGUiLCJsb2ciLCJmcm9tVG8iLCJjYXJvdXNlbCIsIml0ZW1zIiwibGVuZ3RoIiwiaXNEcmFnZ2luZyIsInN0YXJ0WCIsImxhc3RYIiwidmVsb2NpdHkiLCJyYWZJZCIsImZyaWN0aW9uIiwic3BlZWRNdWx0aXBsaWVyIiwicm90YXRpb25JbnRlbnNpdHkiLCJyZXNldFJvdGF0aW9uIiwiZm9yRWFjaCIsIml0ZW0iLCJyb3RhdGlvbloiLCJvdmVyd3JpdGUiLCJ1cGRhdGVJdGVtUm90YXRpb25zIiwidiIsImluZGV4IiwiZmFjdG9yIiwicm90YXRlWiIsInV0aWxzIiwiY2xhbXAiLCJpbmVydGlhTG9vcCIsIk1hdGgiLCJhYnMiLCJzY3JvbGxMZWZ0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RhcnREcmFnIiwiZSIsImluY2x1ZGVzIiwicGFnZVgiLCJ0b3VjaGVzIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJvbkRyYWciLCJ4IiwiZGVsdGEiLCJlbmREcmFnIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3NpdmUiLCJsIiwib25jbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJocmVmIiwicmVwbGFjZVN0YXRlIiwiYmluZCIsInNldCIsImVycm9yIiwid3JhcHBlciIsImNvbnRlbnQiLCJhdXRvUmFmIiwicmFmIiwidGltZSJdLCJzb3VyY2VSb290IjoiIn0=