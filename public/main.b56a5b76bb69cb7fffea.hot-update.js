"use strict";
self["webpackHotUpdateroom187"]("main",{

/***/ "./app/pages/Home/index.js":
/*!*********************************!*\
  !*** ./app/pages/Home/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Home)
/* harmony export */ });
/* harmony import */ var classes_Page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classes/Page */ "./app/classes/Page.js");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gsap/ScrollTrigger */ "./node_modules/gsap/ScrollTrigger.js");



class Home extends classes_Page__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super({
      id: 'home',
      elements: {
        heroContent: '[data-hero-content]',
        homeBody: '[data-home-body]',
        videoBlock: '[data-video-scroll]',
        video: '[data-video-scroll] [data-video]',
        polaroid: '[data-polaroid]',
        roomKeySection: '[data-room-key-section]',
        roomKeyHeader: '[data-room-key-header]',
        roomKeyTitle: '[data-room-key-titles]',
        roomKey: '[data-room-key]',
        progressBar: '[data-progress-bar]',
        progressHighlight: '[data-progress-highlight]',
        progressIndices: '[data-progress-index]',
        steps: '[data-progress-steps]',
        artistNames: '[data-artist-name-animation]',
        stepContainer: '[data-step-container]'
      }
    });
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger);
    this.mm = gsap__WEBPACK_IMPORTED_MODULE_1__["default"].matchMedia();
    this.pinnedHeight = this.elements.roomKeySection ? this.elements.roomKeySection.offsetHeight : 100;
    this.isProgressBarVisible = false;
    this.currentActiveIndex = -1;
    this.init();
  }
  init() {
    this.setUpScrollAnimations();
  }
  animateIndexHighlighter(newIndex) {
    if (newIndex !== this.currentActiveIndex) {
      let yPosCalc = newIndex * 100;
      let yPos = `${yPosCalc}%`;
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(this.elements.progressHighlight, {
        y: yPos,
        duration: 0.4,
        ease: "power2.out"
      });
      this.currentActiveIndex = newIndex;
    }
  }
  hideProgressBar() {
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(this.elements.progressBar, {
      opacity: 0,
      duration: 0.4,
      ease: "power2.out"
    });
    this.isProgressBarVisible = false;
  }
  showProgressBar() {
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(this.elements.progressBar, {
      opacity: 1,
      duration: 0.4,
      ease: "power2.out"
    });
    this.isProgressBarVisible = true;
  }
  setUpScrollAnimations() {
    this.polaroidParallax();
    this.roomKeyAnimations();
    this.artistSectionAnimations();
  }
  polaroidParallax() {
    if (!this.elements.polaroid) return;
    this.elements.polaroid.forEach((element, i) => {
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].fromTo(element, {
        opacity: 0
      }, {
        opacity: 1,
        scrollTrigger: {
          trigger: element,
          start: '50% bottom',
          // Start the animation when the top of the heroContent hits 90% of the viewport
          scrub: false,
          markers: false
        },
        ease: "power2.out",
        duration: 0.6
      });
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].fromTo(element, {
        y: "10%"
      }, {
        y: "-20%",
        scrollTrigger: {
          trigger: element,
          start: '5% bottom',
          scrub: true,
          markers: false
        },
        ease: "power2.out"
      });
    });
  }
  roomKeyAnimations() {
    if (!this.elements.roomKey || !this.elements.steps || !this.elements.roomKeyHeader || !this.elements.stepContainer || !this.elements.progressBar) return;
    let totalStepsHeight = this.elements.steps ? Array.from(this.elements.steps).reduce((total, step) => total + step.offsetHeight, 0) : null;
    let adjustedPinDuration = totalStepsHeight - (this.elements.roomKey.offsetHeight + this.elements.roomKey.offsetHeight / 4);
    let scrollOptions = {
      trigger: this.elements.roomKey,
      start: "center center",
      end: `+=${this.elements.steps[0].offsetHeight}`,
      scrub: true,
      onEnter: () => gsap__WEBPACK_IMPORTED_MODULE_1__["default"].set(this.elements.steps, {
        opacity: 0
      })
    };
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].set(this.elements.steps, {
      opacity: 0,
      y: 50
    });
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].set(this.elements.progressBar, {
      opacity: 0
    });
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
      id: "roomKeyPin",
      trigger: this.elements.roomKeyHeader,
      start: "top top",
      end: () => `+=${this.elements.roomKey.offsetHeight * 1.5}`,
      // Keep it pinned while roomKey moves over
      pin: true,
      pinSpacing: false,
      scrub: true
    });
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(this.elements.roomKeyHeader, {
      opacity: 0,
      scrollTrigger: {
        trigger: this.elements.roomKey,
        start: "top 55%",
        // Begin fade when roomKey starts overlapping
        end: "top 30%",
        // Fully faded when roomKey is in the middle
        scrub: true
      }
    });
    this.mm.add("(max-width: 767px)", () => {
      gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
        trigger: this.elements.roomKey,
        start: "center 30%",
        end: `+=${adjustedPinDuration + this.elements.steps.length * window.innerHeight}`,
        pin: true,
        scrub: true
      });

      // 2️⃣ Pin Step Container AFTER RoomKey is done
      gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
        trigger: this.elements.roomKey,
        start: "center 70%",
        end: `+=${this.elements.steps.length * window.innerHeight}`,
        pin: this.elements.stepContainer,
        //markers: true,
        pinSpacing: false
      });

      // 3️⃣ Hide All Steps Initially
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].set(this.elements.steps, {
        opacity: 0,
        position: "absolute",
        width: "100%"
      });

      // 4️⃣ Step Transitions - Show One Step at a Time
      let stepTl = gsap__WEBPACK_IMPORTED_MODULE_1__["default"].timeline({
        scrollTrigger: {
          trigger: this.elements.stepContainer,
          start: "top center",
          end: `+=${this.elements.steps.length * window.innerHeight}`,
          scrub: true,
          pin: true,
          onUpdate: self => {
            // Calculate which step is active based on progress
            let totalSteps = this.elements.steps.length;
            let rawIndex = Math.floor(self.progress * totalSteps); // 0..totalSteps-1

            // Clamp to valid index
            let activeIndex = Math.min(Math.max(rawIndex, 1), totalSteps - 1);

            // Update highlighter
            this.animateIndexHighlighter(activeIndex - 1);

            // Flip for step 1 (index === 1)
            if (activeIndex === 2) {
              this.elements.roomKey.classList.add("flip");
            }
            if (activeIndex < 2) {
              this.elements.roomKey.classList.remove("flip");
            }
          }
        }
      });
      this.elements.steps.forEach(step => {
        stepTl.to(step, {
          opacity: 1,
          duration: 0.8
        }).to(step, {
          opacity: 0,
          duration: 0.8
        }, "+=1.5");
      });
      gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
        trigger: this.elements.steps[1],
        // first real step
        start: "top 60%",
        end: "top 40%",
        onEnter: () => this.showProgressBar(),
        onLeaveBack: () => this.hideProgressBar()
      });
    });
    this.mm.add("(min-width: 768px)", () => {
      gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
        trigger: this.elements.roomKey,
        start: "center center",
        end: `+=${adjustedPinDuration}`,
        pin: true,
        scrub: true
      });
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(this.elements.roomKey, {
        x: "85%",
        rotate: "5deg",
        ease: "power2.out",
        scrollTrigger: scrollOptions
      });

      // Step opacity should be scroll-based (fade in/out based on scroll)
      this.elements.steps.forEach((step, index) => {
        gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
          trigger: step,
          start: "top 70%",
          end: "top 50%",
          scrub: true,
          toggleActions: "play none none reverse",
          onEnter: () => gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(step, {
            opacity: 1,
            y: 0,
            duration: 0.3
          }),
          onLeaveBack: () => gsap__WEBPACK_IMPORTED_MODULE_1__["default"].to(step, {
            opacity: 0,
            y: 50,
            duration: 0.3
          })
        });

        // **Flip room-key when the second step appears**
        if (index === 2) {
          gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
            trigger: step,
            start: "top center",
            onEnter: () => this.elements.roomKey.classList.add("flip"),
            onLeaveBack: () => this.elements.roomKey.classList.remove("flip")
          });
        }
        gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
          trigger: step,
          start: "top 50%",
          // When the step reaches 50% of the viewport
          end: "top 30%",
          // When the step is almost fully in view
          onEnter: () => {
            if (index === 0) {
              this.animateIndexHighlighter(index); // Highlight the corresponding dot for the current step
            } else {
              this.animateIndexHighlighter(index - 1); // Highlight the corresponding dot for the current step
            }
          },
          onLeaveBack: () => {
            if (index === 1) {
              this.animateIndexHighlighter(index - 1);
            } else {
              this.animateIndexHighlighter(index - 2);
            }
          }
        });
      });
    });

    // Pin progress bar at all times (only show/hide)
    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
      trigger: this.elements.roomKeySection,
      start: "top top",
      end: "bottom bottom",
      pin: this.elements.progressBar
    });

    // Show progress bar when roomKey is fully in view

    gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_2__.ScrollTrigger.create({
      trigger: this.elements.steps[1],
      start: "top center",
      // When the first step reaches the center of the viewport
      onEnter: () => this.showProgressBar(),
      onLeaveBack: () => this.hideProgressBar(),
      markers: false
    });
  }
  artistSectionAnimations() {
    if (!this.elements.videoBlock || !this.elements.video || !this.elements.artistNames) return;
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].fromTo(this.elements.videoBlock, {
      clipPath: "polygon(5% 5%, 95% 5%, 95% 95%, 5% 95%)"
    }, {
      clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
      scrollTrigger: {
        trigger: this.elements.videoBlock,
        start: '5% bottom',
        scrub: true,
        markers: false
      },
      ease: "power2.out"
    });
    gsap__WEBPACK_IMPORTED_MODULE_1__["default"].fromTo(this.elements.video, {
      scale: 1.5
    }, {
      scale: 1,
      scrollTrigger: {
        trigger: this.elements.videoBlock,
        start: '5% bottom',
        // Start the animation when the top of the heroContent hits 90% of the viewport
        scrub: true,
        markers: false
      },
      ease: "power2.out"
    });
    this.elements.artistNames.forEach((name, i) => {
      let getVal = name.getAttribute('data-artist-name-animation');
      let startXpos = getVal === "left" ? "10%" : "-10%";
      gsap__WEBPACK_IMPORTED_MODULE_1__["default"].fromTo(name, {
        x: startXpos,
        opacity: 0
      }, {
        x: 0,
        opacity: 1,
        ease: "power2.out",
        duration: 0.4,
        scrollTrigger: {
          trigger: name,
          start: "top bottom",
          markers: false,
          scrub: true
        }
      });
    });
  }
}

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("cbe7664ecddcf7cc03d9")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ0ksS0FBSyxFQUM3QjtNQUNFb0YsS0FBSyxFQUFFO0lBQ1QsQ0FBQyxFQUNEO01BQ0VBLEtBQUssRUFBRSxDQUFDO01BQ1I3QyxhQUFhLEVBQUU7UUFDYkMsT0FBTyxFQUFFLElBQUksQ0FBQzVDLFFBQVEsQ0FBQ0csVUFBVTtRQUNqQzBDLEtBQUssRUFBRSxXQUFXO1FBQUU7UUFDcEJDLEtBQUssRUFBRSxJQUFJO1FBQ1hDLE9BQU8sRUFBRTtNQUNYLENBQUM7TUFDRGYsSUFBSSxFQUFFO0lBQ1IsQ0FDRixDQUFDO0lBRUQsSUFBSSxDQUFDaEMsUUFBUSxDQUFDYyxXQUFXLENBQUN5QixPQUFPLENBQUMsQ0FBQ2tELElBQUksRUFBRWhELENBQUMsS0FBSztNQUM3QyxJQUFJaUQsTUFBTSxHQUFHRCxJQUFJLENBQUNFLFlBQVksQ0FBQyw0QkFBNEIsQ0FBQztNQUM1RCxJQUFJQyxTQUFTLEdBQUdGLE1BQU0sS0FBSyxNQUFNLEdBQUcsS0FBSyxHQUFFLE1BQU07TUFFakQvRiw0Q0FBSSxDQUFDK0MsTUFBTSxDQUFDK0MsSUFBSSxFQUNkO1FBQ0VOLENBQUMsRUFBRVMsU0FBUztRQUNaMUQsT0FBTyxFQUFFO01BQ1gsQ0FBQyxFQUNEO1FBQ0VpRCxDQUFDLEVBQUUsQ0FBQztRQUNKakQsT0FBTyxFQUFFLENBQUM7UUFDVkYsSUFBSSxFQUFFLFlBQVk7UUFDbEJELFFBQVEsRUFBRSxHQUFHO1FBQ2JZLGFBQWEsRUFBRTtVQUNiQyxPQUFPLEVBQUU2QyxJQUFJO1VBQ2I1QyxLQUFLLEVBQUUsWUFBWTtVQUNuQkUsT0FBTyxFQUFFLEtBQUs7VUFDZEQsS0FBSyxFQUFFO1FBQ1Q7TUFDRixDQUNGLENBQUM7SUFFSCxDQUFDLENBQUM7RUFDSjtBQUNGLEM7Ozs7Ozs7O1VDdldBLHNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9vbTE4Ny8uL2FwcC9wYWdlcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL3Jvb20xODcvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWdlIGZyb20gJ2NsYXNzZXMvUGFnZSdcbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnXG5pbXBvcnQgeyBTY3JvbGxUcmlnZ2VyIH0gZnJvbSAnZ3NhcC9TY3JvbGxUcmlnZ2VyJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgUGFnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIGlkOiAnaG9tZScsXG4gICAgICBlbGVtZW50czoge1xuICAgICAgICBoZXJvQ29udGVudDogJ1tkYXRhLWhlcm8tY29udGVudF0nLFxuICAgICAgICBob21lQm9keTogJ1tkYXRhLWhvbWUtYm9keV0nLFxuICAgICAgICB2aWRlb0Jsb2NrOiAnW2RhdGEtdmlkZW8tc2Nyb2xsXScsXG4gICAgICAgIHZpZGVvOiAnW2RhdGEtdmlkZW8tc2Nyb2xsXSBbZGF0YS12aWRlb10nLFxuICAgICAgICBwb2xhcm9pZDogJ1tkYXRhLXBvbGFyb2lkXScsXG4gICAgICAgIHJvb21LZXlTZWN0aW9uOiAnW2RhdGEtcm9vbS1rZXktc2VjdGlvbl0nLFxuICAgICAgICByb29tS2V5SGVhZGVyOiAnW2RhdGEtcm9vbS1rZXktaGVhZGVyXScsXG4gICAgICAgIHJvb21LZXlUaXRsZTogJ1tkYXRhLXJvb20ta2V5LXRpdGxlc10nLFxuICAgICAgICByb29tS2V5OiAnW2RhdGEtcm9vbS1rZXldJyxcbiAgICAgICAgcHJvZ3Jlc3NCYXI6ICdbZGF0YS1wcm9ncmVzcy1iYXJdJyxcbiAgICAgICAgcHJvZ3Jlc3NIaWdobGlnaHQ6ICdbZGF0YS1wcm9ncmVzcy1oaWdobGlnaHRdJyxcbiAgICAgICAgcHJvZ3Jlc3NJbmRpY2VzOiAnW2RhdGEtcHJvZ3Jlc3MtaW5kZXhdJyxcbiAgICAgICAgc3RlcHM6ICdbZGF0YS1wcm9ncmVzcy1zdGVwc10nLFxuICAgICAgICBhcnRpc3ROYW1lczogJ1tkYXRhLWFydGlzdC1uYW1lLWFuaW1hdGlvbl0nLFxuICAgICAgICBzdGVwQ29udGFpbmVyOiAnW2RhdGEtc3RlcC1jb250YWluZXJdJ1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKVxuICAgIFxuICAgIHRoaXMubW0gPSBnc2FwLm1hdGNoTWVkaWEoKVxuICAgIHRoaXMucGlubmVkSGVpZ2h0ID0gdGhpcy5lbGVtZW50cy5yb29tS2V5U2VjdGlvbj8gdGhpcy5lbGVtZW50cy5yb29tS2V5U2VjdGlvbi5vZmZzZXRIZWlnaHQgOiAxMDBcbiAgICB0aGlzLmlzUHJvZ3Jlc3NCYXJWaXNpYmxlID0gZmFsc2VcbiAgICB0aGlzLmN1cnJlbnRBY3RpdmVJbmRleCA9IC0xXG5cbiAgICB0aGlzLmluaXQoKVxuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnNldFVwU2Nyb2xsQW5pbWF0aW9ucygpXG4gIH1cblxuICBhbmltYXRlSW5kZXhIaWdobGlnaHRlcihuZXdJbmRleCkge1xuICAgIGlmKG5ld0luZGV4ICE9PSB0aGlzLmN1cnJlbnRBY3RpdmVJbmRleCkge1xuICAgICAgbGV0IHlQb3NDYWxjID0gbmV3SW5kZXggKiAxMDBcbiAgICAgIGxldCB5UG9zID0gYCR7eVBvc0NhbGN9JWBcblxuICAgICAgZ3NhcC50byh0aGlzLmVsZW1lbnRzLnByb2dyZXNzSGlnaGxpZ2h0LCB7IHk6IHlQb3MsIGR1cmF0aW9uOiAwLjQsIGVhc2U6IFwicG93ZXIyLm91dFwiIH0pXG4gICAgICB0aGlzLmN1cnJlbnRBY3RpdmVJbmRleCA9IG5ld0luZGV4XG4gICAgfVxuICB9XG5cbiAgaGlkZVByb2dyZXNzQmFyKCkge1xuICAgIGdzYXAudG8odGhpcy5lbGVtZW50cy5wcm9ncmVzc0JhciAsIHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgZWFzZTogXCJwb3dlcjIub3V0XCJcbiAgICB9KVxuXG4gICAgdGhpcy5pc1Byb2dyZXNzQmFyVmlzaWJsZSA9IGZhbHNlXG4gIH1cblxuICBzaG93UHJvZ3Jlc3NCYXIoKSB7XG4gICAgZ3NhcC50byh0aGlzLmVsZW1lbnRzLnByb2dyZXNzQmFyICwge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIlxuICAgIH0pXG5cbiAgICB0aGlzLmlzUHJvZ3Jlc3NCYXJWaXNpYmxlID0gdHJ1ZVxuICB9XG5cbiAgc2V0VXBTY3JvbGxBbmltYXRpb25zKCkge1xuICAgIHRoaXMucG9sYXJvaWRQYXJhbGxheCgpXG4gICAgdGhpcy5yb29tS2V5QW5pbWF0aW9ucygpXG4gICAgdGhpcy5hcnRpc3RTZWN0aW9uQW5pbWF0aW9ucygpXG4gIH1cbiAgXG4gIHBvbGFyb2lkUGFyYWxsYXgoKSB7XG4gICAgaWYoIXRoaXMuZWxlbWVudHMucG9sYXJvaWQpIHJldHVyblxuXG4gICAgdGhpcy5lbGVtZW50cy5wb2xhcm9pZC5mb3JFYWNoKChlbGVtZW50LCBpKSA9PiB7XG4gICAgICBnc2FwLmZyb21UbyhlbGVtZW50LCBcbiAgICAgICAge1xuICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgICAgdHJpZ2dlcjogZWxlbWVudCxcbiAgICAgICAgICAgIHN0YXJ0OiAnNTAlIGJvdHRvbScsIC8vIFN0YXJ0IHRoZSBhbmltYXRpb24gd2hlbiB0aGUgdG9wIG9mIHRoZSBoZXJvQ29udGVudCBoaXRzIDkwJSBvZiB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgIHNjcnViOiBmYWxzZSxcbiAgICAgICAgICAgIG1hcmtlcnM6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIixcbiAgICAgICAgICBkdXJhdGlvbjogMC42XG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgZ3NhcC5mcm9tVG8oZWxlbWVudCwgXG4gICAgICAgIHtcbiAgICAgICAgICB5OiBcIjEwJVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB5OiBcIi0yMCVcIixcbiAgICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgICAgICB0cmlnZ2VyOiBlbGVtZW50LFxuICAgICAgICAgICAgc3RhcnQ6ICc1JSBib3R0b20nLFxuICAgICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgICBtYXJrZXJzOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVhc2U6IFwicG93ZXIyLm91dFwiLFxuICAgICAgICB9XG4gICAgICApXG4gICAgfSlcbiAgfVxuICBcbiAgcm9vbUtleUFuaW1hdGlvbnMoKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnRzLnJvb21LZXkgfHwgIXRoaXMuZWxlbWVudHMuc3RlcHMgfHwgIXRoaXMuZWxlbWVudHMucm9vbUtleUhlYWRlciB8fCAhdGhpcy5lbGVtZW50cy5zdGVwQ29udGFpbmVyIHx8ICF0aGlzLmVsZW1lbnRzLnByb2dyZXNzQmFyKSByZXR1cm47XG5cbiAgICBsZXQgdG90YWxTdGVwc0hlaWdodCA9IHRoaXMuZWxlbWVudHMuc3RlcHM/IEFycmF5LmZyb20odGhpcy5lbGVtZW50cy5zdGVwcykucmVkdWNlKCh0b3RhbCwgc3RlcCkgPT4gdG90YWwgKyBzdGVwLm9mZnNldEhlaWdodCwgMCkgOiBudWxsO1xuICAgIGxldCBhZGp1c3RlZFBpbkR1cmF0aW9uID0gdG90YWxTdGVwc0hlaWdodCAtICh0aGlzLmVsZW1lbnRzLnJvb21LZXkub2Zmc2V0SGVpZ2h0ICsgKHRoaXMuZWxlbWVudHMucm9vbUtleS5vZmZzZXRIZWlnaHQgLyA0KSk7XG4gICAgbGV0IHNjcm9sbE9wdGlvbnMgPSB7XG4gICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzLnJvb21LZXksXG4gICAgICBzdGFydDogXCJjZW50ZXIgY2VudGVyXCIsXG4gICAgICBlbmQ6IGArPSR7dGhpcy5lbGVtZW50cy5zdGVwc1swXS5vZmZzZXRIZWlnaHR9YCxcbiAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgb25FbnRlcjogKCkgPT4gZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5zdGVwcywgeyBvcGFjaXR5OiAwIH0pXG4gICAgfVxuXG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5zdGVwcywgeyBvcGFjaXR5OiAwLCB5OiA1MCB9KVxuICAgIGdzYXAuc2V0KHRoaXMuZWxlbWVudHMucHJvZ3Jlc3NCYXIsIHsgb3BhY2l0eTogMCB9KVxuXG4gICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgaWQ6IFwicm9vbUtleVBpblwiLFxuICAgICAgdHJpZ2dlcjogdGhpcy5lbGVtZW50cy5yb29tS2V5SGVhZGVyLFxuICAgICAgc3RhcnQ6IFwidG9wIHRvcFwiLFxuICAgICAgZW5kOiAoKSA9PiBgKz0ke3RoaXMuZWxlbWVudHMucm9vbUtleS5vZmZzZXRIZWlnaHQgKiAxLjV9YCwgLy8gS2VlcCBpdCBwaW5uZWQgd2hpbGUgcm9vbUtleSBtb3ZlcyBvdmVyXG4gICAgICBwaW46IHRydWUsXG4gICAgICBwaW5TcGFjaW5nOiBmYWxzZSxcbiAgICAgIHNjcnViOiB0cnVlXG4gICAgfSk7XG5cbiAgICBnc2FwLnRvKHRoaXMuZWxlbWVudHMucm9vbUtleUhlYWRlciwge1xuICAgICAgb3BhY2l0eTogMCxcbiAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgdHJpZ2dlcjogdGhpcy5lbGVtZW50cy5yb29tS2V5LFxuICAgICAgICBzdGFydDogXCJ0b3AgNTUlXCIsIC8vIEJlZ2luIGZhZGUgd2hlbiByb29tS2V5IHN0YXJ0cyBvdmVybGFwcGluZ1xuICAgICAgICBlbmQ6IFwidG9wIDMwJVwiLCAvLyBGdWxseSBmYWRlZCB3aGVuIHJvb21LZXkgaXMgaW4gdGhlIG1pZGRsZVxuICAgICAgICBzY3J1YjogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0aGlzLm1tLmFkZChcIihtYXgtd2lkdGg6IDc2N3B4KVwiLCAoKSA9PiB7XG4gICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHMucm9vbUtleSxcbiAgICAgICAgc3RhcnQ6IFwiY2VudGVyIDMwJVwiLFxuICAgICAgICBlbmQ6IGArPSR7YWRqdXN0ZWRQaW5EdXJhdGlvbiArIHRoaXMuZWxlbWVudHMuc3RlcHMubGVuZ3RoICogd2luZG93LmlubmVySGVpZ2h0fWAsXG4gICAgICAgIHBpbjogdHJ1ZSxcbiAgICAgICAgc2NydWI6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyAy77iP4oOjIFBpbiBTdGVwIENvbnRhaW5lciBBRlRFUiBSb29tS2V5IGlzIGRvbmVcbiAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgdHJpZ2dlcjogdGhpcy5lbGVtZW50cy5yb29tS2V5LFxuICAgICAgICBzdGFydDogXCJjZW50ZXIgNzAlXCIsXG4gICAgICAgIGVuZDogYCs9JHt0aGlzLmVsZW1lbnRzLnN0ZXBzLmxlbmd0aCAqIHdpbmRvdy5pbm5lckhlaWdodH1gLFxuICAgICAgICBwaW46IHRoaXMuZWxlbWVudHMuc3RlcENvbnRhaW5lcixcbiAgICAgICAgLy9tYXJrZXJzOiB0cnVlLFxuICAgICAgICBwaW5TcGFjaW5nOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIDPvuI/ig6MgSGlkZSBBbGwgU3RlcHMgSW5pdGlhbGx5XG4gICAgICBnc2FwLnNldCh0aGlzLmVsZW1lbnRzLnN0ZXBzLCB7IG9wYWNpdHk6IDAsIHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHdpZHRoOiBcIjEwMCVcIiB9KTtcblxuICAgICAgLy8gNO+4j+KDoyBTdGVwIFRyYW5zaXRpb25zIC0gU2hvdyBPbmUgU3RlcCBhdCBhIFRpbWVcbiAgICAgIGxldCBzdGVwVGwgPSBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgc2Nyb2xsVHJpZ2dlcjoge1xuICAgICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHMuc3RlcENvbnRhaW5lcixcbiAgICAgICAgICBzdGFydDogXCJ0b3AgY2VudGVyXCIsXG4gICAgICAgICAgZW5kOiBgKz0ke3RoaXMuZWxlbWVudHMuc3RlcHMubGVuZ3RoICogd2luZG93LmlubmVySGVpZ2h0fWAsXG4gICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgcGluOiB0cnVlLFxuICAgICAgICAgIG9uVXBkYXRlOiBzZWxmID0+IHtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB3aGljaCBzdGVwIGlzIGFjdGl2ZSBiYXNlZCBvbiBwcm9ncmVzc1xuICAgICAgICAgICAgbGV0IHRvdGFsU3RlcHMgPSB0aGlzLmVsZW1lbnRzLnN0ZXBzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByYXdJbmRleCA9IE1hdGguZmxvb3Ioc2VsZi5wcm9ncmVzcyAqIHRvdGFsU3RlcHMpOyAvLyAwLi50b3RhbFN0ZXBzLTFcblxuICAgICAgICAgICAgLy8gQ2xhbXAgdG8gdmFsaWQgaW5kZXhcbiAgICAgICAgICAgIGxldCBhY3RpdmVJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KHJhd0luZGV4LCAxKSwgdG90YWxTdGVwcyAtIDEpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgaGlnaGxpZ2h0ZXJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUluZGV4SGlnaGxpZ2h0ZXIoYWN0aXZlSW5kZXggLSAxKTtcblxuICAgICAgICAgICAgLy8gRmxpcCBmb3Igc3RlcCAxIChpbmRleCA9PT0gMSlcbiAgICAgICAgICAgIGlmIChhY3RpdmVJbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnJvb21LZXkuY2xhc3NMaXN0LmFkZChcImZsaXBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWN0aXZlSW5kZXggPCAyKSB7XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMucm9vbUtleS5jbGFzc0xpc3QucmVtb3ZlKFwiZmxpcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIHRoaXMuZWxlbWVudHMuc3RlcHMuZm9yRWFjaCgoc3RlcCkgPT4ge1xuICAgICAgICBzdGVwVGxcbiAgICAgICAgICAudG8oc3RlcCwgeyBvcGFjaXR5OiAxLCBkdXJhdGlvbjogMC44IH0pXG4gICAgICAgICAgLnRvKHN0ZXAsIHsgb3BhY2l0eTogMCwgZHVyYXRpb246IDAuOCB9LCBcIis9MS41XCIpO1xuICAgICAgfSk7XG5cbiAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgdHJpZ2dlcjogdGhpcy5lbGVtZW50cy5zdGVwc1sxXSwgLy8gZmlyc3QgcmVhbCBzdGVwXG4gICAgICAgIHN0YXJ0OiBcInRvcCA2MCVcIixcbiAgICAgICAgZW5kOiBcInRvcCA0MCVcIixcbiAgICAgICAgb25FbnRlcjogKCkgPT4gdGhpcy5zaG93UHJvZ3Jlc3NCYXIoKSxcbiAgICAgICAgb25MZWF2ZUJhY2s6ICgpID0+IHRoaXMuaGlkZVByb2dyZXNzQmFyKClcbiAgICAgIH0pO1xuXG4gICAgICBcbiAgICB9KTtcbiAgICBcbiAgICBcbiAgICB0aGlzLm1tLmFkZChcIihtaW4td2lkdGg6IDc2OHB4KVwiLCAoKSA9PiB7XG4gICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHMucm9vbUtleSxcbiAgICAgICAgc3RhcnQ6IFwiY2VudGVyIGNlbnRlclwiLFxuICAgICAgICBlbmQ6IGArPSR7YWRqdXN0ZWRQaW5EdXJhdGlvbn1gLFxuICAgICAgICBwaW46IHRydWUsXG4gICAgICAgIHNjcnViOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZ3NhcC50byh0aGlzLmVsZW1lbnRzLnJvb21LZXksIHtcbiAgICAgICAgeDogXCI4NSVcIixcbiAgICAgICAgcm90YXRlOiBcIjVkZWdcIixcbiAgICAgICAgZWFzZTogXCJwb3dlcjIub3V0XCIsXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHNjcm9sbE9wdGlvbnNcbiAgICAgIH0pXG5cbiAgICAgIC8vIFN0ZXAgb3BhY2l0eSBzaG91bGQgYmUgc2Nyb2xsLWJhc2VkIChmYWRlIGluL291dCBiYXNlZCBvbiBzY3JvbGwpXG4gICAgICB0aGlzLmVsZW1lbnRzLnN0ZXBzLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7IFxuICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICAgICAgdHJpZ2dlcjogc3RlcCxcbiAgICAgICAgICBzdGFydDogXCJ0b3AgNzAlXCIsXG4gICAgICAgICAgZW5kOiBcInRvcCA1MCVcIixcbiAgICAgICAgICBzY3J1YjogdHJ1ZSxcbiAgICAgICAgICB0b2dnbGVBY3Rpb25zOiBcInBsYXkgbm9uZSBub25lIHJldmVyc2VcIixcbiAgICAgICAgICBvbkVudGVyOiAoKSA9PiBnc2FwLnRvKHN0ZXAsIHsgb3BhY2l0eTogMSwgeTogMCwgZHVyYXRpb246IDAuMyB9KSxcbiAgICAgICAgICBvbkxlYXZlQmFjazogKCkgPT4gZ3NhcC50byhzdGVwLCB7IG9wYWNpdHk6IDAsIHk6IDUwLCBkdXJhdGlvbjogMC4zIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICoqRmxpcCByb29tLWtleSB3aGVuIHRoZSBzZWNvbmQgc3RlcCBhcHBlYXJzKipcbiAgICAgICAgaWYgKGluZGV4ID09PSAyKSB7XG4gICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuICAgICAgICAgICAgdHJpZ2dlcjogc3RlcCxcbiAgICAgICAgICAgIHN0YXJ0OiBcInRvcCBjZW50ZXJcIixcbiAgICAgICAgICAgIG9uRW50ZXI6ICgpID0+IHRoaXMuZWxlbWVudHMucm9vbUtleS5jbGFzc0xpc3QuYWRkKFwiZmxpcFwiKSxcbiAgICAgICAgICAgIG9uTGVhdmVCYWNrOiAoKSA9PiB0aGlzLmVsZW1lbnRzLnJvb21LZXkuY2xhc3NMaXN0LnJlbW92ZShcImZsaXBcIilcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgICAgICB0cmlnZ2VyOiBzdGVwLFxuICAgICAgICAgIHN0YXJ0OiBcInRvcCA1MCVcIiwgLy8gV2hlbiB0aGUgc3RlcCByZWFjaGVzIDUwJSBvZiB0aGUgdmlld3BvcnRcbiAgICAgICAgICBlbmQ6IFwidG9wIDMwJVwiLCAvLyBXaGVuIHRoZSBzdGVwIGlzIGFsbW9zdCBmdWxseSBpbiB2aWV3XG4gICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgaWYoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5hbmltYXRlSW5kZXhIaWdobGlnaHRlcihpbmRleCk7IC8vIEhpZ2hsaWdodCB0aGUgY29ycmVzcG9uZGluZyBkb3QgZm9yIHRoZSBjdXJyZW50IHN0ZXBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUluZGV4SGlnaGxpZ2h0ZXIoaW5kZXggLSAxKTsgLy8gSGlnaGxpZ2h0IHRoZSBjb3JyZXNwb25kaW5nIGRvdCBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25MZWF2ZUJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIGlmKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUluZGV4SGlnaGxpZ2h0ZXIoaW5kZXggLSAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUluZGV4SGlnaGxpZ2h0ZXIoaW5kZXggLSAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gUGluIHByb2dyZXNzIGJhciBhdCBhbGwgdGltZXMgKG9ubHkgc2hvdy9oaWRlKVxuICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbiAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHMucm9vbUtleVNlY3Rpb24sXG4gICAgICBzdGFydDogXCJ0b3AgdG9wXCIsXG4gICAgICBlbmQ6IFwiYm90dG9tIGJvdHRvbVwiLFxuICAgICAgcGluOiB0aGlzLmVsZW1lbnRzLnByb2dyZXNzQmFyXG4gICAgfSlcblxuICAgIC8vIFNob3cgcHJvZ3Jlc3MgYmFyIHdoZW4gcm9vbUtleSBpcyBmdWxseSBpbiB2aWV3XG5cbiAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4gICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzLnN0ZXBzWzFdLFxuICAgICAgc3RhcnQ6IFwidG9wIGNlbnRlclwiLCAvLyBXaGVuIHRoZSBmaXJzdCBzdGVwIHJlYWNoZXMgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnRcbiAgICAgIG9uRW50ZXI6ICgpID0+IHRoaXMuc2hvd1Byb2dyZXNzQmFyKCksXG4gICAgICBvbkxlYXZlQmFjazogKCkgPT4gdGhpcy5oaWRlUHJvZ3Jlc3NCYXIoKSxcbiAgICAgIG1hcmtlcnM6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICBhcnRpc3RTZWN0aW9uQW5pbWF0aW9ucygpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudHMudmlkZW9CbG9jayB8fCAhdGhpcy5lbGVtZW50cy52aWRlbyB8fCAhdGhpcy5lbGVtZW50cy5hcnRpc3ROYW1lcykgcmV0dXJuO1xuXG4gICAgZ3NhcC5mcm9tVG8odGhpcy5lbGVtZW50cy52aWRlb0Jsb2NrLCBcbiAgICAgIHsgY2xpcFBhdGg6IFwicG9seWdvbig1JSA1JSwgOTUlIDUlLCA5NSUgOTUlLCA1JSA5NSUpXCJ9LFxuICAgICAge1xuICAgICAgICBjbGlwUGF0aDogXCJwb2x5Z29uKDAlIDAlLCAxMDAlIDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIsXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzLnZpZGVvQmxvY2ssXG4gICAgICAgICAgc3RhcnQ6ICc1JSBib3R0b20nLFxuICAgICAgICAgIHNjcnViOiB0cnVlLFxuICAgICAgICAgIG1hcmtlcnM6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGVhc2U6IFwicG93ZXIyLm91dFwiLFxuICAgICAgfVxuICAgIClcbiAgICBnc2FwLmZyb21Ubyh0aGlzLmVsZW1lbnRzLnZpZGVvLCBcbiAgICAgIHtcbiAgICAgICAgc2NhbGU6IDEuNVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzLnZpZGVvQmxvY2ssXG4gICAgICAgICAgc3RhcnQ6ICc1JSBib3R0b20nLCAvLyBTdGFydCB0aGUgYW5pbWF0aW9uIHdoZW4gdGhlIHRvcCBvZiB0aGUgaGVyb0NvbnRlbnQgaGl0cyA5MCUgb2YgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgc2NydWI6IHRydWUsXG4gICAgICAgICAgbWFya2VyczogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZWFzZTogXCJwb3dlcjIub3V0XCIsXG4gICAgICB9XG4gICAgKVxuXG4gICAgdGhpcy5lbGVtZW50cy5hcnRpc3ROYW1lcy5mb3JFYWNoKChuYW1lLCBpKSA9PiB7XG4gICAgICBsZXQgZ2V0VmFsID0gbmFtZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXJ0aXN0LW5hbWUtYW5pbWF0aW9uJylcbiAgICAgIGxldCBzdGFydFhwb3MgPSBnZXRWYWwgPT09IFwibGVmdFwiID8gXCIxMCVcIjogXCItMTAlXCJcbiAgICAgIFxuICAgICAgZ3NhcC5mcm9tVG8obmFtZSxcbiAgICAgICAgeyBcbiAgICAgICAgICB4OiBzdGFydFhwb3MsXG4gICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9LFxuICAgICAgICB7IFxuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBlYXNlOiBcInBvd2VyMi5vdXRcIixcbiAgICAgICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IG5hbWUsXG4gICAgICAgICAgICBzdGFydDogXCJ0b3AgYm90dG9tXCIsXG4gICAgICAgICAgICBtYXJrZXJzOiBmYWxzZSxcbiAgICAgICAgICAgIHNjcnViOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG5cbiAgICB9KVxuICB9XG59IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiY2JlNzY2NGVjZGRjZjdjYzAzZDlcIikiXSwibmFtZXMiOlsiUGFnZSIsImdzYXAiLCJTY3JvbGxUcmlnZ2VyIiwiSG9tZSIsImNvbnN0cnVjdG9yIiwiaWQiLCJlbGVtZW50cyIsImhlcm9Db250ZW50IiwiaG9tZUJvZHkiLCJ2aWRlb0Jsb2NrIiwidmlkZW8iLCJwb2xhcm9pZCIsInJvb21LZXlTZWN0aW9uIiwicm9vbUtleUhlYWRlciIsInJvb21LZXlUaXRsZSIsInJvb21LZXkiLCJwcm9ncmVzc0JhciIsInByb2dyZXNzSGlnaGxpZ2h0IiwicHJvZ3Jlc3NJbmRpY2VzIiwic3RlcHMiLCJhcnRpc3ROYW1lcyIsInN0ZXBDb250YWluZXIiLCJyZWdpc3RlclBsdWdpbiIsIm1tIiwibWF0Y2hNZWRpYSIsInBpbm5lZEhlaWdodCIsIm9mZnNldEhlaWdodCIsImlzUHJvZ3Jlc3NCYXJWaXNpYmxlIiwiY3VycmVudEFjdGl2ZUluZGV4IiwiaW5pdCIsInNldFVwU2Nyb2xsQW5pbWF0aW9ucyIsImFuaW1hdGVJbmRleEhpZ2hsaWdodGVyIiwibmV3SW5kZXgiLCJ5UG9zQ2FsYyIsInlQb3MiLCJ0byIsInkiLCJkdXJhdGlvbiIsImVhc2UiLCJoaWRlUHJvZ3Jlc3NCYXIiLCJvcGFjaXR5Iiwic2hvd1Byb2dyZXNzQmFyIiwicG9sYXJvaWRQYXJhbGxheCIsInJvb21LZXlBbmltYXRpb25zIiwiYXJ0aXN0U2VjdGlvbkFuaW1hdGlvbnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsImkiLCJmcm9tVG8iLCJzY3JvbGxUcmlnZ2VyIiwidHJpZ2dlciIsInN0YXJ0Iiwic2NydWIiLCJtYXJrZXJzIiwidG90YWxTdGVwc0hlaWdodCIsIkFycmF5IiwiZnJvbSIsInJlZHVjZSIsInRvdGFsIiwic3RlcCIsImFkanVzdGVkUGluRHVyYXRpb24iLCJzY3JvbGxPcHRpb25zIiwiZW5kIiwib25FbnRlciIsInNldCIsImNyZWF0ZSIsInBpbiIsInBpblNwYWNpbmciLCJhZGQiLCJsZW5ndGgiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBvc2l0aW9uIiwid2lkdGgiLCJzdGVwVGwiLCJ0aW1lbGluZSIsIm9uVXBkYXRlIiwic2VsZiIsInRvdGFsU3RlcHMiLCJyYXdJbmRleCIsIk1hdGgiLCJmbG9vciIsInByb2dyZXNzIiwiYWN0aXZlSW5kZXgiLCJtaW4iLCJtYXgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJvbkxlYXZlQmFjayIsIngiLCJyb3RhdGUiLCJpbmRleCIsInRvZ2dsZUFjdGlvbnMiLCJjbGlwUGF0aCIsInNjYWxlIiwibmFtZSIsImdldFZhbCIsImdldEF0dHJpYnV0ZSIsInN0YXJ0WHBvcyJdLCJzb3VyY2VSb290IjoiIn0=