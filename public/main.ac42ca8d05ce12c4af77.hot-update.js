"use strict";
self["webpackHotUpdateroom187"]("main",{

/***/ "./app/pages/Gallery/index.js":
/*!************************************!*\
  !*** ./app/pages/Gallery/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Gallery)
/* harmony export */ });
/* harmony import */ var classes_Page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classes/Page */ "./app/classes/Page.js");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var utils_LenisScroll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/LenisScroll */ "./app/utils/LenisScroll.js");
/* harmony import */ var gsap_CustomEase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap/CustomEase */ "./node_modules/gsap/CustomEase.js");




class Gallery extends classes_Page__WEBPACK_IMPORTED_MODULE_0__["default"] {
  constructor() {
    super({
      id: 'gallery',
      elements: {
        gallery: '[data-gallery]',
        galleryItems: '[data-gallery-item]',
        slideShow: '[data-slideshow]',
        prev: '[data-slideshow-prev]',
        next: '[data-slideshow-next]',
        close: '[data-slideshow] [data-close]',
        slideShowContainer: '[data-slideshow-container]',
        slideShowCounter: '[data-slideshow-index]',
        miniMap: '[data-mini-map]',
        miniMapItems: '[data-mini-map-item]',
        miniMapIndicator: '[data-mini-map-indicator]',
        playBtns: '[data-gallery-item-play-btn]'
      }
    });
    gsap__WEBPACK_IMPORTED_MODULE_2__["default"].registerPlugin(gsap_CustomEase__WEBPACK_IMPORTED_MODULE_3__.CustomEase);
    gsap_CustomEase__WEBPACK_IMPORTED_MODULE_3__.CustomEase.create("zoom", "0.71, 0, 0.06, 1");
    this.tl = gsap__WEBPACK_IMPORTED_MODULE_2__["default"].timeline();
    this.currentIndex = 0;
    this.media = [];
    this.scroll = utils_LenisScroll__WEBPACK_IMPORTED_MODULE_1__.scroll;
    this.hasMediaBeenSet = false;
    this.allowSlideNavigation = false;
    this.init();
  }
  openSlideShow(e) {
    const mediaElement = e.target;
    const mediaId = mediaElement.dataset.galleryId;
    this.currentIndex = this.media.findIndex(media => media.dataset.galleryId === mediaId);
    this.displayIndex();
    this.scroll.stop();
    this.tl.clear();
    this.updateMinimapIndicator(mediaId, true);
    this.tl.to(this.elements.galleryItems, {
      clipPath: "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",
      duration: 0.4,
      ease: "zoom"
    });
    this.tl.to(this.elements.playBtns, {
      opacity: 0,
      duration: 0.4,
      ease: "power2.out"
    }, '-=0.4');
    this.tl.to(this.elements.slideShow, {
      clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
      duration: 0.6,
      ease: "zoom",
      onComplete: () => {
        this.elements.slideShow.classList.remove('cannot-interact');
        this.showMedia();
        this.enableSlideNavigation();
      }
    }, '-=0.2');
    this.tl.to(this.elements.close, {
      opacity: 1,
      duration: 0.3,
      ease: "power2.out"
    });
    this.tl.to(this.elements.prev, {
      opacity: 1,
      duration: 0.3,
      ease: "power2.out"
    }, 'controls');
    this.tl.to(this.elements.next, {
      opacity: 1,
      duration: 0.3,
      ease: "power2.out"
    }, 'controls');
  }
  closeSlideShow() {
    this.disableSlideNavigation();
    let slideShowMedia = document.querySelector('.slideshow-media__item');
    this.elements.slideShow.classList.add('cannot-interact');
    this.tl.to(this.elements.slideShow, {
      clipPath: "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",
      duration: 0.6,
      ease: "zoom",
      onComplete: () => {
        slideShowMedia.remove();
        this.hasMediaBeenSet = false;
        this.scroll.start();
        this.animateImages(false, true);
      }
    });
    this.tl.to(this.elements.playBtns, {
      opacity: 1,
      duration: 0.4,
      ease: "power2.out"
    }, "+=0.2");
    this.tl.to(this.elements.close, {
      opacity: 0,
      duration: 0.001
    }, 'hide');
    this.tl.to(this.elements.prev, {
      opacity: 0,
      duration: 0.001
    }, 'hide');
    this.tl.to(this.elements.next, {
      opacity: 0,
      duration: 0.001
    }, 'hide');

    // Remove image parameter from URL
    const newUrl = new URL(window.location);
    newUrl.searchParams.delete("media");
    window.history.pushState({}, "", newUrl);
  }
  goToMedia(index) {
    if (index < 0 || index >= this.media.length || index === this.currentIndex) return;
    this.currentIndex = index;
    this.displayIndex();
    if (this.tl.isActive()) {
      this.tl.add(() => {
        this.showMedia();
      });
    } else {
      this.showMedia();
    }
  }
  changeMedia(direction) {
    const oldIndex = this.currentIndex;
    this.currentIndex = (this.currentIndex + direction + this.media.length) % this.media.length;
    this.displayIndex();
    if (oldIndex === this.currentIndex) return;
    if (this.tl.isActive()) {
      this.tl.add(() => {
        this.showMedia();
      });
    } else {
      this.showMedia();
    }
  }
  showMedia() {
    const mediaCurrentElem = this.media[this.currentIndex];
    const mediaType = mediaCurrentElem.dataset.galleryItem;
    const mediaId = mediaCurrentElem.dataset.galleryId;
    this.updateMinimapIndicator(mediaId);

    // If the same media, don't do anything
    if (this.elements.slideShowContainer.querySelector(`[data-slideshow-id="${mediaId}"]`)) {
      return;
    }
    if (!this.hasMediaBeenSet) {
      this.createAndSetMediaElement(mediaCurrentElem, mediaType);
      this.hasMediaBeenSet = true;
    } else {
      this.swapMediaElement(mediaCurrentElem, mediaType);
    }

    // Update the URL with the new image ID
    const newUrl = new URL(window.location);
    newUrl.searchParams.set("media", mediaId);
    window.history.pushState({}, "", newUrl);
  }
  createAndSetMediaElement(mediaElem, mediaType) {
    const newElem = this.createNewMediaItem(mediaType);
    this.setMediaAttributes(newElem, mediaElem, mediaType);
    this.elements.slideShowContainer.innerHTML = ''; // Clear previous elements
    this.elements.slideShowContainer.appendChild(newElem);
    gsap__WEBPACK_IMPORTED_MODULE_2__["default"].fromTo(newElem, {
      clipPath: "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"
    }, {
      clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
      duration: 0.6,
      ease: "power2.out"
    });
  }
  displayIndex() {
    this.elements.slideShowCounter.innerHTML = String(this.currentIndex + 1).padStart(2, '0');
  }
  swapMediaElement(mediaElem, mediaType) {
    const oldElem = this.elements.slideShowContainer.firstChild;
    const newElem = this.createNewMediaItem(mediaType);
    this.setMediaAttributes(newElem, mediaElem, mediaType);
    this.elements.slideShowContainer.appendChild(newElem);
    this.tl.fromTo(newElem, {
      opacity: 0
    }, {
      opacity: 1,
      duration: 0.4,
      ease: "power2.out"
    });
    this.tl.to(oldElem, {
      opacity: 0,
      duration: 0.4,
      ease: "power2.out",
      onComplete: () => {
        oldElem.remove();
      }
    }, "-=0.2");
  }
  setupScrollNavigation() {
    let ticking = false;
    window.addEventListener('wheel', e => {
      if (!this.allowSlideNavigation || ticking) return;
      ticking = true;
      const direction = e.deltaY > 0 ? 1 : -1;
      this.changeMedia(direction);
      setTimeout(() => {
        ticking = false;
      }, 600); // delay to prevent overscroll
    });
  }
  setupSwipeNavigation() {
    if (!this.elements.slideShowContainer) return;
    let touchStartX = 0;
    let touchEndX = 0;
    const threshold = 50; // Minimum swipe distance

    const container = this.elements.slideShowContainer;
    container.addEventListener('touchstart', e => {
      touchStartX = e.changedTouches[0].screenX;
    });
    container.addEventListener('touchend', e => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });
    const handleSwipe = () => {
      if (!this.allowSlideNavigation) return;
      const delta = touchStartX - touchEndX;
      if (Math.abs(delta) > threshold) {
        const direction = delta > 0 ? 1 : -1;
        this.changeMedia(direction);
      }
    };
  }
  disableSlideNavigation() {
    this.allowSlideNavigation = false;
  }
  enableSlideNavigation() {
    this.allowSlideNavigation = true;
  }
  createNewMediaItem(type) {
    const elem = type === "video" ? document.createElement('video') : document.createElement('img');
    elem.classList.add('slideshow-media__item');
    return elem;
  }
  setMediaAttributes(elem, mediaElem, mediaType) {
    const mediaId = mediaElem.dataset.galleryId;
    const posterImg = mediaElem.src;
    elem.setAttribute('data-slideshow-id', mediaId);
    if (mediaType === "video") {
      elem.setAttribute('autoplay', '');
      elem.setAttribute('loop', '');
      elem.setAttribute('playsinline', '');
      elem.setAttribute('controls', '');
      elem.setAttribute('poster', posterImg);
      const source = document.createElement('source');
      source.src = mediaElem.dataset.gallerySrc;
      source.type = "video/mp4";
      elem.appendChild(source);
    } else {
      elem.src = mediaElem.dataset.gallerySrc;
      elem.alt = mediaElem.alt || "Gallery Image";
    }
  }
  updateMinimapIndicator(mediaId = this.media[this.currentIndex]?.dataset.galleryId, instant = false) {
    if (!mediaId) return;
    let miniMapRect = this.elements.miniMap.getBoundingClientRect();
    this.elements.miniMapItems.forEach((item, i) => {
      if (item.dataset.galleryId === mediaId) {
        let itemRect = item.getBoundingClientRect();
        const targetX = -item.offsetLeft;
        const indicatorXpos = itemRect.left - miniMapRect.left;
        if (instant) {
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(this.elements.miniMapIndicator, {
            x: indicatorXpos
          });
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(this.elements.miniMap, {
            x: targetX
          });
        } else {
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(this.elements.miniMapIndicator, {
            x: indicatorXpos,
            duration: 0.4,
            ease: "zoom"
          });
          gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(this.elements.miniMap, {
            x: targetX,
            duration: 0.4,
            ease: "power3.out"
          });
        }
      }
    });
  }

  // Check URL on Page Load & Open Slideshow if Needed
  checkURLForSlideShow() {
    window.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const mediaId = urlParams.get("media");
      if (mediaId) {
        const mediaElement = document.querySelector(`[data-gallery-id="${mediaId}"]`);
        if (mediaElement) this.openSlideShow({
          target: mediaElement
        });
      }
    });
  }
  animateImages(useStrollTrigger, show = true) {
    let clipPathPoly = show ? "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)" : "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)";
    if (useStrollTrigger) {
      gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(this.elements.galleryItems, {
        clipPath: clipPathPoly,
        duration: 0.6,
        scrollTrigger: {
          trigger: this.elements.galleryItems,
          start: 'top bottom',
          scrub: false,
          markers: false
        },
        ease: "zoom"
      });
    } else {
      gsap__WEBPACK_IMPORTED_MODULE_2__["default"].to(this.elements.galleryItems, {
        clipPath: clipPathPoly,
        duration: 0.6,
        ease: "zoom"
      });
    }
    this.tl.to(this.elements.playBtns, {
      opacity: 1,
      duration: 0.4,
      ease: "power2.out"
    }, "+=0.2");
  }
  animateAssets(tl, resolve) {
    super.animateAssets(tl, () => {
      this.animateImages(true);
      resolve();
    });
  }
  handleResize = () => {
    this.updateMinimapIndicator();
  };
  handleKeyDown = e => {
    // Only proceed if slideshow is open
    if (!this.elements.slideShow || this.elements.slideShow.classList.contains('cannot-interact')) return;
    if (e.key === 'ArrowRight') {
      this.changeMedia(1);
    } else if (e.key === 'ArrowLeft') {
      this.changeMedia(-1);
    }
  };

  // Debounce helper (avoids spamming during resize)
  debounce(fn, delay = 100) {
    let timeout;
    return () => {
      clearTimeout(timeout);
      timeout = setTimeout(fn, delay);
    };
  }
  addEventListeners() {
    if (!this.elements.galleryItems || !this.elements.close) return;
    gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(this.elements.galleryItems, {
      clipPath: "polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"
    });
    if (this.elements.playBtns) {
      gsap__WEBPACK_IMPORTED_MODULE_2__["default"].set(this.elements.playBtns, {
        opacity: 0
      });
    }
    if (Array.isArray(this.elements.galleryItems) || typeof this.elements.galleryItems === 'object') {
      this.media = Array.from(this.elements.galleryItems);
      this.elements.galleryItems.forEach(element => {
        element.addEventListener('click', e => {
          this.openSlideShow(e);
        });
      });
    } else {
      this.elements.galleryItems.addEventListener('click', e => {
        this.openSlideShow(e);
      });
    }
    if (this.elements.prev) {
      this.elements.prev.addEventListener('click', () => {
        this.changeMedia(-1);
      });
    }
    if (this.elements.next) {
      this.elements.next.addEventListener('click', () => {
        this.changeMedia(1);
      });
    }
    this.elements.close.addEventListener('click', () => {
      this.closeSlideShow();
    });
    document.addEventListener('keydown', this.handleKeyDown);
    if (this.elements.miniMapItems) {
      this.elements.miniMapItems.forEach((elem, i) => {
        elem.addEventListener('click', () => {
          if (!this.allowSlideNavigation) return;
          this.goToMedia(i);
        });
      });
    }
    window.addEventListener('resize', this.debounce(this.handleResize));
  }
  init() {
    this.addEventListeners();
    this.checkURLForSlideShow();
    this.setupSwipeNavigation();
    this.setupScrollNavigation();
  }
}

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("fae2723139d86363ff2e")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQ2xFLG9CQUFvQixFQUFFO1VBQ2hDLElBQUksQ0FBQ3dDLFNBQVMsQ0FBQ3NELENBQUMsQ0FBQztRQUNuQixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7SUFDSjtJQUVBNUQsTUFBTSxDQUFDZ0MsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQ3FELFFBQVEsQ0FBQyxJQUFJLENBQUNKLFlBQVksQ0FBQyxDQUFDO0VBQ3JFO0VBRUFsSCxJQUFJQSxDQUFBLEVBQUc7SUFDTCxJQUFJLENBQUMySCxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3hCLElBQUksQ0FBQ3ZCLG9CQUFvQixDQUFDLENBQUM7SUFDM0IsSUFBSSxDQUFDaEMsb0JBQW9CLENBQUMsQ0FBQztJQUMzQixJQUFJLENBQUNMLHFCQUFxQixDQUFDLENBQUM7RUFDOUI7QUFDRixDOzs7Ozs7OztVQzFjQSxzRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Jvb20xODcvLi9hcHAvcGFnZXMvR2FsbGVyeS9pbmRleC5qcyIsIndlYnBhY2s6Ly9yb29tMTg3L3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFnZSBmcm9tICdjbGFzc2VzL1BhZ2UnXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJ1xuaW1wb3J0IHsgc2Nyb2xsIH0gZnJvbSAndXRpbHMvTGVuaXNTY3JvbGwnXG5pbXBvcnQgeyBDdXN0b21FYXNlIH0gZnJvbSAnZ3NhcC9DdXN0b21FYXNlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5IGV4dGVuZHMgUGFnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIGlkOiAnZ2FsbGVyeScsXG4gICAgICBlbGVtZW50czoge1xuICAgICAgICBnYWxsZXJ5OiAnW2RhdGEtZ2FsbGVyeV0nLFxuICAgICAgICBnYWxsZXJ5SXRlbXM6ICdbZGF0YS1nYWxsZXJ5LWl0ZW1dJyxcbiAgICAgICAgc2xpZGVTaG93OiAnW2RhdGEtc2xpZGVzaG93XScsXG4gICAgICAgIHByZXY6ICdbZGF0YS1zbGlkZXNob3ctcHJldl0nLFxuICAgICAgICBuZXh0OiAnW2RhdGEtc2xpZGVzaG93LW5leHRdJyxcbiAgICAgICAgY2xvc2U6ICdbZGF0YS1zbGlkZXNob3ddIFtkYXRhLWNsb3NlXScsXG4gICAgICAgIHNsaWRlU2hvd0NvbnRhaW5lcjogJ1tkYXRhLXNsaWRlc2hvdy1jb250YWluZXJdJyxcbiAgICAgICAgc2xpZGVTaG93Q291bnRlcjogJ1tkYXRhLXNsaWRlc2hvdy1pbmRleF0nLFxuICAgICAgICBtaW5pTWFwOiAnW2RhdGEtbWluaS1tYXBdJyxcbiAgICAgICAgbWluaU1hcEl0ZW1zOiAnW2RhdGEtbWluaS1tYXAtaXRlbV0nLFxuICAgICAgICBtaW5pTWFwSW5kaWNhdG9yOiAnW2RhdGEtbWluaS1tYXAtaW5kaWNhdG9yXScsXG4gICAgICAgIHBsYXlCdG5zOiAnW2RhdGEtZ2FsbGVyeS1pdGVtLXBsYXktYnRuXSdcblxuICAgICAgfVxuICAgIH0pXG5cbiAgICBnc2FwLnJlZ2lzdGVyUGx1Z2luKEN1c3RvbUVhc2UpXG4gICAgQ3VzdG9tRWFzZS5jcmVhdGUoXCJ6b29tXCIsIFwiMC43MSwgMCwgMC4wNiwgMVwiKVxuXG4gICAgdGhpcy50bCA9IGdzYXAudGltZWxpbmUoKVxuICAgIHRoaXMuY3VycmVudEluZGV4ID0gMFxuICAgIHRoaXMubWVkaWEgPSBbXVxuICAgIHRoaXMuc2Nyb2xsID0gc2Nyb2xsXG4gICAgdGhpcy5oYXNNZWRpYUJlZW5TZXQgPSBmYWxzZVxuXG4gICAgdGhpcy5hbGxvd1NsaWRlTmF2aWdhdGlvbiA9IGZhbHNlXG4gICAgXG4gICAgdGhpcy5pbml0KClcbiAgfVxuXG4gIG9wZW5TbGlkZVNob3coZSkge1xuICAgIGNvbnN0IG1lZGlhRWxlbWVudCA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IG1lZGlhSWQgPSBtZWRpYUVsZW1lbnQuZGF0YXNldC5nYWxsZXJ5SWQ7XG5cbiAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHRoaXMubWVkaWEuZmluZEluZGV4KG1lZGlhID0+IG1lZGlhLmRhdGFzZXQuZ2FsbGVyeUlkID09PSBtZWRpYUlkKVxuICAgIHRoaXMuZGlzcGxheUluZGV4KClcbiAgICB0aGlzLnNjcm9sbC5zdG9wKClcbiAgICB0aGlzLnRsLmNsZWFyKClcblxuICAgIHRoaXMudXBkYXRlTWluaW1hcEluZGljYXRvcihtZWRpYUlkLCB0cnVlKTtcblxuICAgIHRoaXMudGwudG8odGhpcy5lbGVtZW50cy5nYWxsZXJ5SXRlbXMsIHsgXG4gICAgICBjbGlwUGF0aDogXCJwb2x5Z29uKDAlIDEwMCUsIDEwMCUgMTAwJSwgMTAwJSAxMDAlLCAwJSAxMDAlKVwiLCBcbiAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICBlYXNlOiBcInpvb21cIlxuICAgIH0pXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMucGxheUJ0bnMsIFxuICAgIHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgZWFzZTogXCJwb3dlcjIub3V0XCJcbiAgICB9LCctPTAuNCcpXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuc2xpZGVTaG93LCB7XG4gICAgICBjbGlwUGF0aDogXCJwb2x5Z29uKDAlIDAlLCAxMDAlIDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIsXG4gICAgICBkdXJhdGlvbjogMC42LFxuICAgICAgZWFzZTogXCJ6b29tXCIsXG4gICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2xpZGVTaG93LmNsYXNzTGlzdC5yZW1vdmUoJ2Nhbm5vdC1pbnRlcmFjdCcpXG4gICAgICAgIHRoaXMuc2hvd01lZGlhKClcbiAgICAgICAgdGhpcy5lbmFibGVTbGlkZU5hdmlnYXRpb24oKVxuICAgICAgfVxuICAgIH0sICctPTAuMicpXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuY2xvc2UsIHsgb3BhY2l0eTogMSwgZHVyYXRpb246IDAuMywgZWFzZTogXCJwb3dlcjIub3V0XCIgfSlcbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMucHJldiwgeyBvcGFjaXR5OiAxLCBkdXJhdGlvbjogMC4zLCBlYXNlOiBcInBvd2VyMi5vdXRcIiB9LCAnY29udHJvbHMnKVxuICAgIHRoaXMudGwudG8odGhpcy5lbGVtZW50cy5uZXh0LCB7IG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAwLjMsIGVhc2U6IFwicG93ZXIyLm91dFwiIH0sICdjb250cm9scycpXG4gIH1cblxuICBjbG9zZVNsaWRlU2hvdygpIHtcbiAgICB0aGlzLmRpc2FibGVTbGlkZU5hdmlnYXRpb24oKVxuICAgIGxldCBzbGlkZVNob3dNZWRpYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXNob3ctbWVkaWFfX2l0ZW0nKVxuICAgIHRoaXMuZWxlbWVudHMuc2xpZGVTaG93LmNsYXNzTGlzdC5hZGQoJ2Nhbm5vdC1pbnRlcmFjdCcpXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuc2xpZGVTaG93LCB7XG4gICAgICBjbGlwUGF0aDogXCJwb2x5Z29uKDAlIDEwMCUsIDEwMCUgMTAwJSwgMTAwJSAxMDAlLCAwJSAxMDAlKVwiLFxuICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgIGVhc2U6IFwiem9vbVwiLFxuICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICBzbGlkZVNob3dNZWRpYS5yZW1vdmUoKVxuICAgICAgICB0aGlzLmhhc01lZGlhQmVlblNldCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc2Nyb2xsLnN0YXJ0KClcbiAgICAgICAgdGhpcy5hbmltYXRlSW1hZ2VzKGZhbHNlLCB0cnVlKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMucGxheUJ0bnMsIHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBkdXJhdGlvbjogMC40LFxuICAgICAgZWFzZTogXCJwb3dlcjIub3V0XCJcbiAgICB9LCBcIis9MC4yXCIpXG5cbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMuY2xvc2UsIHsgb3BhY2l0eTogMCwgZHVyYXRpb246IDAuMDAxIH0sICdoaWRlJylcbiAgICB0aGlzLnRsLnRvKHRoaXMuZWxlbWVudHMucHJldiwgeyBvcGFjaXR5OiAwLCBkdXJhdGlvbjogMC4wMDEgfSwgJ2hpZGUnKVxuICAgIHRoaXMudGwudG8odGhpcy5lbGVtZW50cy5uZXh0LCB7IG9wYWNpdHk6IDAsIGR1cmF0aW9uOiAwLjAwMSB9LCAnaGlkZScpXG4gICAgXG4gICAgLy8gUmVtb3ZlIGltYWdlIHBhcmFtZXRlciBmcm9tIFVSTFxuICAgIGNvbnN0IG5ld1VybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKTtcbiAgICBuZXdVcmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm1lZGlhXCIpO1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgXCJcIiwgbmV3VXJsKTtcbiAgfVxuICBcbiAgZ29Ub01lZGlhKGluZGV4KSB7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLm1lZGlhLmxlbmd0aCB8fCBpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgIHRoaXMuZGlzcGxheUluZGV4KCk7XG5cbiAgICBpZiAodGhpcy50bC5pc0FjdGl2ZSgpKSB7XG4gICAgICB0aGlzLnRsLmFkZCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2hvd01lZGlhKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zaG93TWVkaWEoKTtcbiAgICB9XG4gIH1cblxuICBjaGFuZ2VNZWRpYShkaXJlY3Rpb24pIHtcbiAgICBjb25zdCBvbGRJbmRleCA9IHRoaXMuY3VycmVudEluZGV4XG4gICAgdGhpcy5jdXJyZW50SW5kZXggPSAodGhpcy5jdXJyZW50SW5kZXggKyBkaXJlY3Rpb24gKyB0aGlzLm1lZGlhLmxlbmd0aCkgJSB0aGlzLm1lZGlhLmxlbmd0aFxuICAgIHRoaXMuZGlzcGxheUluZGV4KClcbiAgICBcbiAgICBpZiAob2xkSW5kZXggPT09IHRoaXMuY3VycmVudEluZGV4KSByZXR1cm5cblxuICAgIGlmICh0aGlzLnRsLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMudGwuYWRkKCgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93TWVkaWEoKTtcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd01lZGlhKCk7XG4gICAgfVxuICB9XG5cbiAgc2hvd01lZGlhKCkge1xuICAgIGNvbnN0IG1lZGlhQ3VycmVudEVsZW0gPSB0aGlzLm1lZGlhW3RoaXMuY3VycmVudEluZGV4XVxuICAgIGNvbnN0IG1lZGlhVHlwZSA9IG1lZGlhQ3VycmVudEVsZW0uZGF0YXNldC5nYWxsZXJ5SXRlbVxuICAgIGNvbnN0IG1lZGlhSWQgPSBtZWRpYUN1cnJlbnRFbGVtLmRhdGFzZXQuZ2FsbGVyeUlkO1xuICAgIFxuICAgIHRoaXMudXBkYXRlTWluaW1hcEluZGljYXRvcihtZWRpYUlkKVxuXG4gICAgLy8gSWYgdGhlIHNhbWUgbWVkaWEsIGRvbid0IGRvIGFueXRoaW5nXG4gICAgaWYgKHRoaXMuZWxlbWVudHMuc2xpZGVTaG93Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXNsaWRlc2hvdy1pZD1cIiR7bWVkaWFJZH1cIl1gKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXNNZWRpYUJlZW5TZXQpIHtcbiAgICAgIHRoaXMuY3JlYXRlQW5kU2V0TWVkaWFFbGVtZW50KG1lZGlhQ3VycmVudEVsZW0sIG1lZGlhVHlwZSlcbiAgICAgIHRoaXMuaGFzTWVkaWFCZWVuU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN3YXBNZWRpYUVsZW1lbnQobWVkaWFDdXJyZW50RWxlbSwgbWVkaWFUeXBlKVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGggdGhlIG5ldyBpbWFnZSBJRFxuICAgIGNvbnN0IG5ld1VybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKVxuICAgIG5ld1VybC5zZWFyY2hQYXJhbXMuc2V0KFwibWVkaWFcIiwgbWVkaWFJZClcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sIFwiXCIsIG5ld1VybClcbiAgfVxuXG4gIGNyZWF0ZUFuZFNldE1lZGlhRWxlbWVudChtZWRpYUVsZW0sIG1lZGlhVHlwZSkge1xuICAgIGNvbnN0IG5ld0VsZW0gPSB0aGlzLmNyZWF0ZU5ld01lZGlhSXRlbShtZWRpYVR5cGUpXG4gICAgdGhpcy5zZXRNZWRpYUF0dHJpYnV0ZXMobmV3RWxlbSwgbWVkaWFFbGVtLCBtZWRpYVR5cGUpXG5cbiAgICB0aGlzLmVsZW1lbnRzLnNsaWRlU2hvd0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJyAvLyBDbGVhciBwcmV2aW91cyBlbGVtZW50c1xuICAgIHRoaXMuZWxlbWVudHMuc2xpZGVTaG93Q29udGFpbmVyLmFwcGVuZENoaWxkKG5ld0VsZW0pXG5cbiAgICBnc2FwLmZyb21UbyhuZXdFbGVtLCB7IGNsaXBQYXRoOiBcInBvbHlnb24oMCUgMTAwJSwgMTAwJSAxMDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIgfSwgeyBjbGlwUGF0aDogXCJwb2x5Z29uKDAlIDAlLCAxMDAlIDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIsIGR1cmF0aW9uOiAwLjYsIGVhc2U6IFwicG93ZXIyLm91dFwiIH0pXG4gIH1cblxuICBkaXNwbGF5SW5kZXgoKSB7XG4gICAgdGhpcy5lbGVtZW50cy5zbGlkZVNob3dDb3VudGVyLmlubmVySFRNTCA9IFN0cmluZyh0aGlzLmN1cnJlbnRJbmRleCArIDEpLnBhZFN0YXJ0KDIsICcwJylcbiAgfVxuXG4gIHN3YXBNZWRpYUVsZW1lbnQobWVkaWFFbGVtLCBtZWRpYVR5cGUpIHtcbiAgICBjb25zdCBvbGRFbGVtID0gdGhpcy5lbGVtZW50cy5zbGlkZVNob3dDb250YWluZXIuZmlyc3RDaGlsZFxuICAgIGNvbnN0IG5ld0VsZW0gPSB0aGlzLmNyZWF0ZU5ld01lZGlhSXRlbShtZWRpYVR5cGUpXG4gICAgdGhpcy5zZXRNZWRpYUF0dHJpYnV0ZXMobmV3RWxlbSwgbWVkaWFFbGVtLCBtZWRpYVR5cGUpXG5cbiAgICB0aGlzLmVsZW1lbnRzLnNsaWRlU2hvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtKVxuICAgIFxuICAgIHRoaXMudGwuZnJvbVRvKG5ld0VsZW0sIHsgb3BhY2l0eTogMCB9LCB7IG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAwLjQsIGVhc2U6IFwicG93ZXIyLm91dFwiIH0pXG4gICAgXG4gICAgdGhpcy50bC50byhvbGRFbGVtLCB7XG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgIGVhc2U6IFwicG93ZXIyLm91dFwiLFxuICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICBvbGRFbGVtLnJlbW92ZSgpXG4gICAgICB9XG4gICAgfSwgXCItPTAuMlwiKVxuICB9XG5cbiAgc2V0dXBTY3JvbGxOYXZpZ2F0aW9uKCkge1xuICAgIGxldCB0aWNraW5nID0gZmFsc2U7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmFsbG93U2xpZGVOYXZpZ2F0aW9uIHx8IHRpY2tpbmcpIHJldHVybjtcblxuICAgICAgdGlja2luZyA9IHRydWU7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBlLmRlbHRhWSA+IDAgPyAxIDogLTE7XG5cbiAgICAgIHRoaXMuY2hhbmdlTWVkaWEoZGlyZWN0aW9uKTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRpY2tpbmcgPSBmYWxzZTtcbiAgICAgIH0sIDYwMCk7IC8vIGRlbGF5IHRvIHByZXZlbnQgb3ZlcnNjcm9sbFxuICAgIH0pO1xuICB9XG5cbiAgc2V0dXBTd2lwZU5hdmlnYXRpb24oKSB7XG4gICAgaWYoIXRoaXMuZWxlbWVudHMuc2xpZGVTaG93Q29udGFpbmVyKSByZXR1cm5cblxuICAgIGxldCB0b3VjaFN0YXJ0WCA9IDA7XG4gICAgbGV0IHRvdWNoRW5kWCA9IDA7XG5cbiAgICBjb25zdCB0aHJlc2hvbGQgPSA1MDsgLy8gTWluaW11bSBzd2lwZSBkaXN0YW5jZVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5zbGlkZVNob3dDb250YWluZXI7XG4gICAgXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgdG91Y2hTdGFydFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblg7XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZSkgPT4ge1xuICAgICAgdG91Y2hFbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YO1xuICAgICAgaGFuZGxlU3dpcGUoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGhhbmRsZVN3aXBlID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmFsbG93U2xpZGVOYXZpZ2F0aW9uKSByZXR1cm47XG4gICAgICBjb25zdCBkZWx0YSA9IHRvdWNoU3RhcnRYIC0gdG91Y2hFbmRYO1xuICAgICAgXG4gICAgICBpZiAoTWF0aC5hYnMoZGVsdGEpID4gdGhyZXNob2xkKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGRlbHRhID4gMCA/IDEgOiAtMTtcbiAgICAgICAgdGhpcy5jaGFuZ2VNZWRpYShkaXJlY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBkaXNhYmxlU2xpZGVOYXZpZ2F0aW9uKCkge1xuICAgIHRoaXMuYWxsb3dTbGlkZU5hdmlnYXRpb24gPSBmYWxzZTtcbiAgfVxuXG4gIGVuYWJsZVNsaWRlTmF2aWdhdGlvbigpIHtcbiAgICB0aGlzLmFsbG93U2xpZGVOYXZpZ2F0aW9uID0gdHJ1ZTtcbiAgfVxuXG4gIGNyZWF0ZU5ld01lZGlhSXRlbSh0eXBlKSB7XG4gICAgY29uc3QgZWxlbSA9IHR5cGUgPT09IFwidmlkZW9cIiA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJykgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVzaG93LW1lZGlhX19pdGVtJylcbiAgICByZXR1cm4gZWxlbVxuICB9XG5cbiAgc2V0TWVkaWFBdHRyaWJ1dGVzKGVsZW0sIG1lZGlhRWxlbSwgbWVkaWFUeXBlKSB7XG4gICAgY29uc3QgbWVkaWFJZCA9IG1lZGlhRWxlbS5kYXRhc2V0LmdhbGxlcnlJZFxuICAgIGNvbnN0IHBvc3RlckltZyA9IG1lZGlhRWxlbS5zcmNcblxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlc2hvdy1pZCcsIG1lZGlhSWQpXG5cbiAgICBpZiAobWVkaWFUeXBlID09PSBcInZpZGVvXCIpIHtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICcnKVxuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2xvb3AnLCAnJylcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKVxuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2NvbnRyb2xzJywgJycpXG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZSgncG9zdGVyJywgcG9zdGVySW1nKVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKVxuICAgICAgc291cmNlLnNyYyA9IG1lZGlhRWxlbS5kYXRhc2V0LmdhbGxlcnlTcmNcbiAgICAgIHNvdXJjZS50eXBlID0gXCJ2aWRlby9tcDRcIlxuICAgICAgZWxlbS5hcHBlbmRDaGlsZChzb3VyY2UpXG5cbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbS5zcmMgPSBtZWRpYUVsZW0uZGF0YXNldC5nYWxsZXJ5U3JjXG4gICAgICBlbGVtLmFsdCA9IG1lZGlhRWxlbS5hbHQgfHwgXCJHYWxsZXJ5IEltYWdlXCJcbiAgICB9XG4gIH1cblxuICB1cGRhdGVNaW5pbWFwSW5kaWNhdG9yKG1lZGlhSWQgPSB0aGlzLm1lZGlhW3RoaXMuY3VycmVudEluZGV4XT8uZGF0YXNldC5nYWxsZXJ5SWQsIGluc3RhbnQgPSBmYWxzZSkge1xuICAgIGlmICghbWVkaWFJZCkgcmV0dXJuXG4gICAgbGV0IG1pbmlNYXBSZWN0ID0gdGhpcy5lbGVtZW50cy5taW5pTWFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLmVsZW1lbnRzLm1pbmlNYXBJdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XG4gICAgICBpZiAoaXRlbS5kYXRhc2V0LmdhbGxlcnlJZCA9PT0gbWVkaWFJZCkge1xuICAgICAgICBsZXQgaXRlbVJlY3QgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXJnZXRYID0gLWl0ZW0ub2Zmc2V0TGVmdFxuICAgICAgICBjb25zdCBpbmRpY2F0b3JYcG9zID0gaXRlbVJlY3QubGVmdCAtIG1pbmlNYXBSZWN0LmxlZnRcblxuICAgICAgICBpZiAoaW5zdGFudCkge1xuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuZWxlbWVudHMubWluaU1hcEluZGljYXRvciwge3g6IGluZGljYXRvclhwb3N9KVxuICAgICAgICAgIGdzYXAuc2V0KHRoaXMuZWxlbWVudHMubWluaU1hcCwgeyB4OiB0YXJnZXRYIH0pXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnc2FwLnRvKHRoaXMuZWxlbWVudHMubWluaU1hcEluZGljYXRvciwge1xuICAgICAgICAgICAgeDogaW5kaWNhdG9yWHBvcyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgICAgICBlYXNlOiBcInpvb21cIlxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBnc2FwLnRvKHRoaXMuZWxlbWVudHMubWluaU1hcCwge1xuICAgICAgICAgICAgeDogdGFyZ2V0WCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjQsXG4gICAgICAgICAgICBlYXNlOiBcInBvd2VyMy5vdXRcIlxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIENoZWNrIFVSTCBvbiBQYWdlIExvYWQgJiBPcGVuIFNsaWRlc2hvdyBpZiBOZWVkZWRcbiAgY2hlY2tVUkxGb3JTbGlkZVNob3coKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICBjb25zdCBtZWRpYUlkID0gdXJsUGFyYW1zLmdldChcIm1lZGlhXCIpO1xuICBcbiAgICAgIGlmIChtZWRpYUlkKSB7XG4gICAgICAgIGNvbnN0IG1lZGlhRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWdhbGxlcnktaWQ9XCIke21lZGlhSWR9XCJdYCk7XG4gICAgICAgIGlmIChtZWRpYUVsZW1lbnQpIHRoaXMub3BlblNsaWRlU2hvdyh7IHRhcmdldDogbWVkaWFFbGVtZW50IH0pO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgXG4gIGFuaW1hdGVJbWFnZXModXNlU3Ryb2xsVHJpZ2dlciwgc2hvdyA9IHRydWUpIHtcbiAgICBsZXQgY2xpcFBhdGhQb2x5ID0gc2hvdz8gXCJwb2x5Z29uKDAlIDAlLCAxMDAlIDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIgOiBcInBvbHlnb24oMCUgMTAwJSwgMTAwJSAxMDAlLCAxMDAlIDEwMCUsIDAlIDEwMCUpXCIgXG5cbiAgICBpZih1c2VTdHJvbGxUcmlnZ2VyKSB7XG4gICAgICBnc2FwLnRvKHRoaXMuZWxlbWVudHMuZ2FsbGVyeUl0ZW1zLFxuICAgICAgICB7XG4gICAgICAgICAgY2xpcFBhdGg6IGNsaXBQYXRoUG9seSxcbiAgICAgICAgICBkdXJhdGlvbjogMC42LFxuICAgICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHMuZ2FsbGVyeUl0ZW1zLFxuICAgICAgICAgICAgc3RhcnQ6ICd0b3AgYm90dG9tJyxcbiAgICAgICAgICAgIHNjcnViOiBmYWxzZSxcbiAgICAgICAgICAgIG1hcmtlcnM6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlYXNlOiBcInpvb21cIlxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZ3NhcC50byh0aGlzLmVsZW1lbnRzLmdhbGxlcnlJdGVtcyxcbiAgICAgICAge1xuICAgICAgICAgIGNsaXBQYXRoOiBjbGlwUGF0aFBvbHksXG4gICAgICAgICAgZHVyYXRpb246IDAuNixcbiAgICAgICAgICBlYXNlOiBcInpvb21cIlxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuXG4gICAgdGhpcy50bC50byh0aGlzLmVsZW1lbnRzLnBsYXlCdG5zLCB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgZHVyYXRpb246IDAuNCxcbiAgICAgIGVhc2U6IFwicG93ZXIyLm91dFwiXG4gICAgfSwgXCIrPTAuMlwiKVxuICB9XG5cbiAgYW5pbWF0ZUFzc2V0cyh0bCwgcmVzb2x2ZSkge1xuICAgIHN1cGVyLmFuaW1hdGVBc3NldHModGwsICgpID0+IHtcbiAgICAgIHRoaXMuYW5pbWF0ZUltYWdlcyh0cnVlKVxuXG4gICAgICByZXNvbHZlKClcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgIHRoaXMudXBkYXRlTWluaW1hcEluZGljYXRvcigpXG4gIH1cblxuICBoYW5kbGVLZXlEb3duID0gKGUpID0+IHtcbiAgICAvLyBPbmx5IHByb2NlZWQgaWYgc2xpZGVzaG93IGlzIG9wZW5cbiAgICBpZiAoIXRoaXMuZWxlbWVudHMuc2xpZGVTaG93IHx8IHRoaXMuZWxlbWVudHMuc2xpZGVTaG93LmNsYXNzTGlzdC5jb250YWlucygnY2Fubm90LWludGVyYWN0JykpIHJldHVyblxuXG4gICAgaWYgKGUua2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgIHRoaXMuY2hhbmdlTWVkaWEoMSlcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgdGhpcy5jaGFuZ2VNZWRpYSgtMSlcbiAgICB9XG4gIH1cblxuICAvLyBEZWJvdW5jZSBoZWxwZXIgKGF2b2lkcyBzcGFtbWluZyBkdXJpbmcgcmVzaXplKVxuICBkZWJvdW5jZShmbiwgZGVsYXkgPSAxMDApIHtcbiAgICBsZXQgdGltZW91dFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZuLCBkZWxheSlcbiAgICB9XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICBpZighdGhpcy5lbGVtZW50cy5nYWxsZXJ5SXRlbXMgfHwgIXRoaXMuZWxlbWVudHMuY2xvc2UpIHJldHVyblxuXG4gICAgZ3NhcC5zZXQodGhpcy5lbGVtZW50cy5nYWxsZXJ5SXRlbXMsIHsgY2xpcFBhdGg6IFwicG9seWdvbigwJSAxMDAlLCAxMDAlIDEwMCUsIDEwMCUgMTAwJSwgMCUgMTAwJSlcIn0pXG4gIFxuICAgIGlmKHRoaXMuZWxlbWVudHMucGxheUJ0bnMpIHtcbiAgICAgIGdzYXAuc2V0KHRoaXMuZWxlbWVudHMucGxheUJ0bnMsIHsgb3BhY2l0eTogMCB9KVxuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuZWxlbWVudHMuZ2FsbGVyeUl0ZW1zKSB8fCAodHlwZW9mIHRoaXMuZWxlbWVudHMuZ2FsbGVyeUl0ZW1zID09PSAnb2JqZWN0JykpIHtcbiAgICAgIHRoaXMubWVkaWEgPSBBcnJheS5mcm9tKHRoaXMuZWxlbWVudHMuZ2FsbGVyeUl0ZW1zKVxuICAgICAgdGhpcy5lbGVtZW50cy5nYWxsZXJ5SXRlbXMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGVuU2xpZGVTaG93KGUpXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmdhbGxlcnlJdGVtcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHRoaXMub3BlblNsaWRlU2hvdyhlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZih0aGlzLmVsZW1lbnRzLnByZXYpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMucHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jaGFuZ2VNZWRpYSgtMSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYodGhpcy5lbGVtZW50cy5uZXh0KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLm5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2hhbmdlTWVkaWEoMSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cy5jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VTbGlkZVNob3coKVxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKVxuXG4gICAgaWYodGhpcy5lbGVtZW50cy5taW5pTWFwSXRlbXMpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMubWluaU1hcEl0ZW1zLmZvckVhY2goKGVsZW0sIGkpID0+IHtcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dTbGlkZU5hdmlnYXRpb24pIHJldHVybjtcbiAgICAgICAgICB0aGlzLmdvVG9NZWRpYShpKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5kZWJvdW5jZSh0aGlzLmhhbmRsZVJlc2l6ZSkpXG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuY2hlY2tVUkxGb3JTbGlkZVNob3coKVxuICAgIHRoaXMuc2V0dXBTd2lwZU5hdmlnYXRpb24oKVxuICAgIHRoaXMuc2V0dXBTY3JvbGxOYXZpZ2F0aW9uKClcbiAgfVxufSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcImZhZTI3MjMxMzlkODYzNjNmZjJlXCIpIl0sIm5hbWVzIjpbIlBhZ2UiLCJnc2FwIiwic2Nyb2xsIiwiQ3VzdG9tRWFzZSIsIkdhbGxlcnkiLCJjb25zdHJ1Y3RvciIsImlkIiwiZWxlbWVudHMiLCJnYWxsZXJ5IiwiZ2FsbGVyeUl0ZW1zIiwic2xpZGVTaG93IiwicHJldiIsIm5leHQiLCJjbG9zZSIsInNsaWRlU2hvd0NvbnRhaW5lciIsInNsaWRlU2hvd0NvdW50ZXIiLCJtaW5pTWFwIiwibWluaU1hcEl0ZW1zIiwibWluaU1hcEluZGljYXRvciIsInBsYXlCdG5zIiwicmVnaXN0ZXJQbHVnaW4iLCJjcmVhdGUiLCJ0bCIsInRpbWVsaW5lIiwiY3VycmVudEluZGV4IiwibWVkaWEiLCJoYXNNZWRpYUJlZW5TZXQiLCJhbGxvd1NsaWRlTmF2aWdhdGlvbiIsImluaXQiLCJvcGVuU2xpZGVTaG93IiwiZSIsIm1lZGlhRWxlbWVudCIsInRhcmdldCIsIm1lZGlhSWQiLCJkYXRhc2V0IiwiZ2FsbGVyeUlkIiwiZmluZEluZGV4IiwiZGlzcGxheUluZGV4Iiwic3RvcCIsImNsZWFyIiwidXBkYXRlTWluaW1hcEluZGljYXRvciIsInRvIiwiY2xpcFBhdGgiLCJkdXJhdGlvbiIsImVhc2UiLCJvcGFjaXR5Iiwib25Db21wbGV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNob3dNZWRpYSIsImVuYWJsZVNsaWRlTmF2aWdhdGlvbiIsImNsb3NlU2xpZGVTaG93IiwiZGlzYWJsZVNsaWRlTmF2aWdhdGlvbiIsInNsaWRlU2hvd01lZGlhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkIiwic3RhcnQiLCJhbmltYXRlSW1hZ2VzIiwibmV3VXJsIiwiVVJMIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2hQYXJhbXMiLCJkZWxldGUiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ29Ub01lZGlhIiwiaW5kZXgiLCJsZW5ndGgiLCJpc0FjdGl2ZSIsImNoYW5nZU1lZGlhIiwiZGlyZWN0aW9uIiwib2xkSW5kZXgiLCJtZWRpYUN1cnJlbnRFbGVtIiwibWVkaWFUeXBlIiwiZ2FsbGVyeUl0ZW0iLCJjcmVhdGVBbmRTZXRNZWRpYUVsZW1lbnQiLCJzd2FwTWVkaWFFbGVtZW50Iiwic2V0IiwibWVkaWFFbGVtIiwibmV3RWxlbSIsImNyZWF0ZU5ld01lZGlhSXRlbSIsInNldE1lZGlhQXR0cmlidXRlcyIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiZnJvbVRvIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJvbGRFbGVtIiwiZmlyc3RDaGlsZCIsInNldHVwU2Nyb2xsTmF2aWdhdGlvbiIsInRpY2tpbmciLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsdGFZIiwic2V0VGltZW91dCIsInNldHVwU3dpcGVOYXZpZ2F0aW9uIiwidG91Y2hTdGFydFgiLCJ0b3VjaEVuZFgiLCJ0aHJlc2hvbGQiLCJjb250YWluZXIiLCJjaGFuZ2VkVG91Y2hlcyIsInNjcmVlblgiLCJoYW5kbGVTd2lwZSIsImRlbHRhIiwiTWF0aCIsImFicyIsInR5cGUiLCJlbGVtIiwiY3JlYXRlRWxlbWVudCIsInBvc3RlckltZyIsInNyYyIsInNldEF0dHJpYnV0ZSIsInNvdXJjZSIsImdhbGxlcnlTcmMiLCJhbHQiLCJpbnN0YW50IiwibWluaU1hcFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJpdGVtUmVjdCIsInRhcmdldFgiLCJvZmZzZXRMZWZ0IiwiaW5kaWNhdG9yWHBvcyIsImxlZnQiLCJ4IiwiY2hlY2tVUkxGb3JTbGlkZVNob3ciLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJnZXQiLCJ1c2VTdHJvbGxUcmlnZ2VyIiwic2hvdyIsImNsaXBQYXRoUG9seSIsInNjcm9sbFRyaWdnZXIiLCJ0cmlnZ2VyIiwic2NydWIiLCJtYXJrZXJzIiwiYW5pbWF0ZUFzc2V0cyIsInJlc29sdmUiLCJoYW5kbGVSZXNpemUiLCJoYW5kbGVLZXlEb3duIiwiY29udGFpbnMiLCJrZXkiLCJkZWJvdW5jZSIsImZuIiwiZGVsYXkiLCJ0aW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImlzQXJyYXkiLCJmcm9tIiwiZWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=